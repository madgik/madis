
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Row functions list &#8212; madIS 1.9 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/jsMath/easy/load.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Aggregate functions list" href="aggregate.html" />
    <link rel="prev" title="Examples" href="examples.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="aggregate.html" title="Aggregate functions list"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Examples"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">madIS 1.9 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-functions.row.__init__">
<span id="id1"></span><span id="row-functions-list"></span><h1>Row functions list<a class="headerlink" href="#module-functions.row.__init__" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-functions.row.boolean">
<span id="boolean-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">boolean</span></code> functions<a class="headerlink" href="#module-functions.row.boolean" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>ifthenelse function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.boolean.ifthenelse">
<code class="descname">ifthenelse</code><span class="sig-paren">(</span><em>condition</em>, <em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.boolean.ifthenelse" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <em>x</em> if <em>condition</em> is true, else returns <em>y</em>.</p>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The difference with the <em>if</em> construct in most programming languages
is that <em>x</em> and <em>y</em> expressions will always be evaluated.</p>
</div>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select ifthenelse(1&gt;0,&#39;yes&#39;,&#39;no&#39;) as answer&quot;</span><span class="p">)</span>
<span class="go">answer</span>
<span class="go">------</span>
<span class="go">yes</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.date">
<span id="date-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">date</span></code> functions<a class="headerlink" href="#module-functions.row.date" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>activityindex function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.date.activityIndex">
<code class="descname">activityIndex</code><span class="sig-paren">(</span><em>date</em>, <em>c1</em>, <em>c2</em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#functions.row.date.activityIndex" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Specialized function that classifies the provided date argument into a 6-point scale (0 to 5)</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">&#39;2009-01-01T01:32:03Z&#39;</span>
<span class="gp">... </span><span class="s1">&#39;2010-01-01T00:03:13Z&#39;</span>
<span class="gp">... </span><span class="s1">&#39;2010-12-31T00:03:13Z&#39;</span>
<span class="gp">... </span><span class="s1">&#39;2011-04-01T00:03:13Z&#39;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select activityIndex(a) from table1&quot;</span><span class="p">)</span>
<span class="go">activityIndex(a)</span>
<span class="go">----------------</span>
<span class="go">0</span>
<span class="go">1</span>
<span class="go">3</span>
<span class="go">5</span>
</pre></div>
</div>
</dd>
<dt><strong>cleantimezone function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.date.cleantimezone">
<code class="descname">cleantimezone</code><span class="sig-paren">(</span><em>date</em><span class="sig-paren">)</span> &#x2192; date<a class="headerlink" href="#functions.row.date.cleantimezone" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Specialized function that removes timezone information from date string</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">&#39;2009-01-01T01:03:13+0100&#39;</span>
<span class="gp">... </span><span class="s1">&#39;2009-01-01T01:03:13-0100&#39;</span>
<span class="gp">... </span><span class="s1">&#39;2009-01-01T01:03:13+01:00&#39;</span>
<span class="gp">... </span><span class="s1">&#39;2009-01-01T01:03:13-01:00&#39;</span>
<span class="gp">... </span><span class="s1">&#39;2009-01-01T01:03:13+01&#39;</span>
<span class="gp">... </span><span class="s1">&#39;2009-01-01T01:03:13-01&#39;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select cleantimezone(a) from table1&quot;</span><span class="p">)</span>
<span class="go">cleantimezone(a)</span>
<span class="go">-------------------</span>
<span class="go">2009-01-01 01:03:13</span>
<span class="go">2009-01-01 01:03:13</span>
<span class="go">2009-01-01 01:03:13</span>
<span class="go">2009-01-01 01:03:13</span>
<span class="go">2009-01-01 01:03:13</span>
<span class="go">2009-01-01 01:03:13</span>
</pre></div>
</div>
</dd>
<dt><strong>date2iso function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.date.date2iso">
<code class="descname">date2iso</code><span class="sig-paren">(</span><em>sec</em><span class="sig-paren">)</span> &#x2192; ISO Datetime<a class="headerlink" href="#functions.row.date.date2iso" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Converts an input date to ISO-8601 date format. It tries to autodetect, the
input date format.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">2007-12-31</span>
<span class="gp">... </span><span class="s1">2010-01-01</span>
<span class="gp">... </span><span class="s1">2010W06</span>
<span class="gp">... </span><span class="s1">&quot;18/Jan/2011:11:13:00 +0100&quot;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select date2iso(a) from table1&quot;</span><span class="p">)</span>
<span class="go">date2iso(a)</span>
<span class="go">-------------------------</span>
<span class="go">2007-12-31T00:00:00+00:00</span>
<span class="go">2010-01-01T00:00:00+00:00</span>
<span class="go">2010-02-05T00:00:00+00:00</span>
<span class="go">2011-01-18T11:13:00+01:00</span>
</pre></div>
</div>
</dd>
<dt><strong>datestrf2isoweek function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.date.dateisoweek2week52">
<code class="descname">dateisoweek2week52</code><span class="sig-paren">(</span><em>sec</em><span class="sig-paren">)</span> &#x2192; isoweek<a class="headerlink" href="#functions.row.date.dateisoweek2week52" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Converts an ISOweek (having weeks in range [0,53]) to an ISOweek
format which has weeks in range [1,53]. This function is usefull for
producing week statistics which do not have incomplete weeks.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">2007-12-31</span>
<span class="gp">... </span><span class="s1">2010-01-01</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select strftime(&#39;%YW%W&#39;,a) from table1&quot;</span><span class="p">)</span>
<span class="go">strftime(&#39;%YW%W&#39;,a)</span>
<span class="go">-------------------</span>
<span class="go">2007W53</span>
<span class="go">2010W00</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select datestrf2isoweek(strftime(&#39;%YW%W&#39;,a)) from table1&quot;</span><span class="p">)</span>
<span class="go">datestrf2isoweek(strftime(&#39;%YW%W&#39;,a))</span>
<span class="go">-------------------------------------</span>
<span class="go">2007W53</span>
<span class="go">2009W53</span>
</pre></div>
</div>
</dd>
<dt><strong>sectohuman function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.date.sectohuman">
<code class="descname">sectohuman</code><span class="sig-paren">(</span><em>sec</em><span class="sig-paren">)</span> &#x2192; human readable format<a class="headerlink" href="#functions.row.date.sectohuman" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Converts a number of seconds to human readable format.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">3</span>
<span class="gp">... </span><span class="s1">63</span>
<span class="gp">... </span><span class="s1">10000</span>
<span class="gp">... </span><span class="s1">100000</span>
<span class="gp">... </span><span class="s1">1000000</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select sectohuman(a) from table1&quot;</span><span class="p">)</span>
<span class="go">sectohuman(a)</span>
<span class="go">------------------------------</span>
<span class="go">3 sec</span>
<span class="go">1 min 3 sec</span>
<span class="go">2 hours 46 min 40 sec</span>
<span class="go">1 day 3 hours 46 min 40 sec</span>
<span class="go">11 days 13 hours 46 min 40 sec</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.evals">
<span id="evals-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">evals</span></code> functions<a class="headerlink" href="#module-functions.row.evals" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>pyeval function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.evals.pyeval">
<code class="descname">pyeval</code><span class="sig-paren">(</span><em>expression</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.evals.pyeval" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Evaluates with Python the expression/s given and returns the result</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;pyeval &#39;1+1&#39;&quot;</span><span class="p">)</span>
<span class="go">pyeval(&#39;1+1&#39;)</span>
<span class="go">-------------</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select var(&#39;test&#39;)&quot;</span><span class="p">)</span>  
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">OperatorError</span>: <span class="n">Madis SQLError:</span>
<span class="go">Operator VAR: Variable &#39;test&#39; does not exist</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select var(&#39;test&#39;, pyeval(&#39;1+1&#39;))&quot;</span><span class="p">)</span>
<span class="go">var(&#39;test&#39;, pyeval(&#39;1+1&#39;))</span>
<span class="go">--------------------------</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select var(&#39;test&#39;)&quot;</span><span class="p">)</span>
<span class="go">var(&#39;test&#39;)</span>
<span class="go">-----------</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;pyeval &#39;1+1&#39; &#39;&quot;-&quot;&#39; &#39;3+1&#39; &#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">pyeval(&#39;1+1&#39;,&#39;&quot;-&quot;&#39;,&#39;3+1&#39;)</span>
<span class="go">-------------------------</span>
<span class="go">2-4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;var &#39;testvar&#39; of select 5&quot;</span><span class="p">)</span>
<span class="go">var(&#39;testvar&#39;,(select 5))</span>
<span class="go">-------------------------</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;pyeval &#39;testvar+5&#39;&quot;</span><span class="p">)</span>
<span class="go">pyeval(&#39;testvar+5&#39;)</span>
<span class="go">-------------------</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;pyeval keywords(&#39;lala&#39;) &#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">pyeval(&#39;keywords(&#39;&#39;lala&#39;&#39;)&#39;)</span>
<span class="go">----------------------------</span>
<span class="go">lala</span>
</pre></div>
</div>
</dd>
<dt><strong>pyfun function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.evals.pyfun">
<code class="descname">pyfun</code><span class="sig-paren">(</span><em>pyfunction</em>, <em>parameters</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.evals.pyfun" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Calls a python function and returns the result. If an error occurs, it throws an
exception.</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select pyfun(&#39;math.sqrt&#39;, 25)&quot;</span><span class="p">)</span>
<span class="go">pyfun(&#39;math.sqrt&#39;, 25)</span>
<span class="go">----------------------</span>
<span class="go">5.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select pyfun(&#39;math.log10&#39;, 100)&quot;</span><span class="p">)</span>
<span class="go">pyfun(&#39;math.log10&#39;, 100)</span>
<span class="go">------------------------</span>
<span class="go">2.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select pyfun(&#39;math.log10&#39;, -1)&quot;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">OperatorError</span>: <span class="n">Madis SQLError:</span>
<span class="go">Operator PYFUN: math.log10: math domain error</span>
</pre></div>
</div>
</dd>
<dt><strong>pyfunerrtonul function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.evals.pyfunerrtonul">
<code class="descname">pyfunerrtonul</code><span class="sig-paren">(</span><em>pyfunction</em>, <em>parameters</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.evals.pyfunerrtonul" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Calls a python function and returns the result. If an error occurs it returns
<em>null</em>.</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select pyfunerrtonul(&#39;math.sqrt&#39;, -1)&quot;</span><span class="p">)</span>
<span class="go">pyfunerrtonul(&#39;math.sqrt&#39;, -1)</span>
<span class="go">------------------------------</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select pyfunerrtonul(&#39;math.log10&#39;, -1)&quot;</span><span class="p">)</span>
<span class="go">pyfunerrtonul(&#39;math.log10&#39;, -1)</span>
<span class="go">-------------------------------</span>
<span class="go">None</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>query function</strong></p>
<dl class="docutils">
<dt><strong>subst function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.evals.subst">
<code class="descname">subst</code><span class="sig-paren">(</span><em>str</em>, <em>variables</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.evals.subst" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Substitutes the special text markers with the variables values.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;subst &#39;Variable </span><span class="si">%s</span><span class="s1"> has value </span><span class="si">%s</span><span class="s1">&#39; &#39;var1&#39; &#39;5&#39; &#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">subst(&#39;Variable %s has value %s&#39;,&#39;var1&#39;,&#39;5&#39;)</span>
<span class="go">--------------------------------------------</span>
<span class="go">Variable var1 has value 5</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select subst(&#39;Variable </span><span class="si">%s</span><span class="s1"> has value </span><span class="si">%d</span><span class="s1">&#39;,&#39;var2&#39;,5) &#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">subst(&#39;Variable %s has value %d&#39;,&#39;var2&#39;,5)</span>
<span class="go">------------------------------------------</span>
<span class="go">Variable var2 has value 5</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;var &#39;testvar&#39; &#39;testvalue&#39; &#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">var(&#39;testvar&#39;,&#39;testvalue&#39;)</span>
<span class="go">--------------------------</span>
<span class="go">testvalue</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select subst(&#39;Variable %</span><span class="si">{testvar}</span><span class="s1">1 %</span><span class="si">{testvar1}</span><span class="s1"> has value </span><span class="si">%s</span><span class="s1">&#39;, 5) &#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">subst(&#39;Variable testvalue1 %{testvar1} has value %s&#39;, 5)</span>
<span class="go">--------------------------------------------------------</span>
<span class="go">Variable testvalue1 %{testvar1} has value %s</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.fileops">
<span id="fileops-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">fileops</span></code> functions<a class="headerlink" href="#module-functions.row.fileops" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>fileextension function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.fileops.fileextension">
<code class="descname">fileextension</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span> &#x2192; text<a class="headerlink" href="#functions.row.fileops.fileextension" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the extension of a given text argument.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">&quot;http://www.test.com/lalala.gif&quot;</span>
<span class="gp">... </span><span class="s1">&quot;http://www.test.com/lalala.GIF&quot;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select fileextension(a) from table1&quot;</span><span class="p">)</span>
<span class="go">fileextension(a)</span>
<span class="go">----------------</span>
<span class="go">.gif</span>
<span class="go">.gif</span>
</pre></div>
</div>
</dd>
<dt><strong>filetext function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.fileops.filetext">
<code class="descname">filetext</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span> &#x2192; text<a class="headerlink" href="#functions.row.fileops.filetext" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the contents of the file in a single value</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select filetext(&#39;testing/sales.tsv&#39;)&quot;</span><span class="p">)</span> 
<span class="go">filetext(&#39;testing/sales.tsv&#39;)</span>
<span class="go">----------------------------------</span>
<span class="go">Cars        2010-01 Athens  200</span>
<span class="go">Cars        2010-02 Athens  130</span>
<span class="go">Bikes       2010-01 NY      10</span>
<span class="go">Bikes       2010-02 NY      30</span>
<span class="go">Cars        2010-01 NY      100</span>
<span class="go">Cars        2010-02 NY      160</span>
<span class="go">Cars        2010-01 Paris   70</span>
<span class="go">Cars        2010-02 Paris   20</span>
<span class="go">Bikes       2010-01 Paris   100</span>
<span class="go">Bikes       2010-02 Paris   20</span>
<span class="go">Boats       2010-01 Paris   200</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.formating">
<span id="formating-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">formating</span></code> functions<a class="headerlink" href="#module-functions.row.formating" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>dateformat function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.formating.dateformat">
<code class="descname">dateformat</code><span class="sig-paren">(</span><em>date</em><span class="optional">[</span>, <em>inpformat</em>, <em>outformat</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.formating.dateformat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns <em>date</em> formatted with <em>outformat</em>. Default <em>inpformat</em> is %d-%m-%y and default
<em>outformat</em> is %Y-%m-%d. To change <em>inpformat</em> just provide as second parameter the input format.
To change <em>outformat</em>, both format parameters must be provided. If date is not formatted according
to <em>inpformat</em> null value is returned.</p>
<p>Check <a class="reference external" href="http://docs.python.org/library/time.html?#strftime-strptime-behavior">formatting pattern</a> details</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select dateformat(&#39;28-01-09&#39;) as date&quot;</span><span class="p">)</span>
<span class="go">date</span>
<span class="go">----------</span>
<span class="go">2009-01-28</span>
</pre></div>
</div>
<p>When date doesn’t meet the format null is returned</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select dateformat(&#39;32-01-09&#39;) as date&quot;</span><span class="p">)</span>
<span class="go">date</span>
<span class="go">----</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select dateformat(&#39;Thu, 28 Jun 2001 14:17:15 +0000&#39;,&#39;%a, </span><span class="si">%d</span><span class="s2"> %b %Y %H:%M:%S +0000&#39;) as date&quot;</span><span class="p">)</span>
<span class="go">date</span>
<span class="go">----------</span>
<span class="go">2001-06-28</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select dateformat(&#39;28-01-09&#39;,&#39;</span><span class="si">%d</span><span class="s2">-%m-%y&#39;,&#39;</span><span class="si">%x</span><span class="s2">&#39;) as date&quot;</span><span class="p">)</span>
<span class="go">date</span>
<span class="go">--------</span>
<span class="go">01/28/09</span>
</pre></div>
</div>
</dd>
<dt><strong>strjoin function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.formating.strjoin">
<code class="descname">strjoin</code><span class="sig-paren">(</span><em>value1</em>, <em>value2</em>, <em>....</em><span class="optional">[</span>, <em>'params'</em>, <em>formatting options</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.formating.strjoin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns a string with <em>value1,value2,….</em> formatted according to <a class="reference internal" href="#formattingopts"><span class="std std-ref">formatting options</span></a>.
Literal parameter ‘params’ must precede <em>formating options</em>. Default formatting is comma separated values.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select strjoin(&#39;First&#39;,&#39;Second&#39;,&#39;Third&#39;,100) as joinedvals&quot;</span><span class="p">)</span>
<span class="go">joinedvals</span>
<span class="go">-----------------------</span>
<span class="go">First,Second,Third,100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select strjoin(&#39;First&#39;,&#39;Second&#39;,&#39;Third&#39;,100,&#39;params&#39;,&#39;delimiter: &#39;) as joinedvals&quot;</span><span class="p">)</span>
<span class="go">joinedvals</span>
<span class="go">-----------------------</span>
<span class="go">First Second Third 100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select strjoin(&#39;lola&#39;,2,10,&#39;llalallall&#39;,&#39;params&#39;,&#39;delimiter:%&#39;,&#39;quoting:QUOTE_ALL&#39;) as joinedvals&quot;</span><span class="p">)</span>
<span class="go">joinedvals</span>
<span class="go">-----------------------------</span>
<span class="go">&quot;lola&quot;%&quot;2&quot;%&quot;10&quot;%&quot;llalallall&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select strjoin(&#39;value, with delimiter &#39;,2,10,&#39;new&#39;,&#39;params&#39;,&#39;dialect:csv&#39;) as joinedvals&quot;</span><span class="p">)</span>
<span class="go">joinedvals</span>
<span class="go">----------------------------------</span>
<span class="go">&quot;value, with delimiter &quot;,2,10,new</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>strsplit function</strong></p>
<blockquote>
<div><dl class="function">
<dt id="functions.row.formating.strsplit">
<code class="descname">strsplit</code><span class="sig-paren">(</span><em>str</em><span class="optional">[</span>, <em>formatting options</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; [C1,C2,....]<a class="headerlink" href="#functions.row.formating.strsplit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Splits <em>str</em> according to <em>formatting options</em>, default behavior is to split on space.
It is a multiset operator that returns one row.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="manual.html#tutmultiset"><span class="std std-ref">Multisets</span></a> functions</li>
</ul>
</div>
<p id="formattingopts">Formatting options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">dialect:</th><td class="field-body"><p class="first"><em>tsv/csv</em></p>
<p>Formats field as tab/comma separated values with minimal quoting</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">delimiter:</th><td class="field-body"><p class="first">A string used to separate fields. It defaults to ‘ ‘</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">doublequote:</th><td class="field-body"><p class="first"><em>t/f</em></p>
<p>Controls how instances of quotechar appearing inside a
field should be themselves be quoted. When True, the
character is doubled. When False, the escapechar is used as
a prefix to the quotechar. It defaults to True.
On output, if doublequote is False and no escapechar is set,
Error is raised if a quotechar is found in a field</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">escapechar:</th><td class="field-body"><p class="first">A one-character string used by the writer to escape the delimiter
if quoting is set to QUOTE_NONE and the quotechar if doublequote is False.
On reading, the escapechar removes any special meaning from the following
character. It defaults to None, which disables escaping.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">quotechar:</th><td class="field-body"><p class="first">A one-character string used to quote fields containing special characters,
such as the delimiter or quotechar, or which contain new-line characters.
It defaults to ‘”’.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">quoting:</th><td class="field-body"><p class="first">Controls when quotes should be generated by the writer and recognized by
the reader. It can take on any of the QUOTE_* constants and defaults to
QUOTE_MINIMAL. Possible values are QUOTE_ALL, QUOTE_NONE, QUOTE_MINIMAL, QUOTE_NONNUMERIC</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">skipinitialspace:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first"><em>t/f</em></p>
<p>When True, whitespace immediately following the delimiter is ignored. The default is False</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Returned multiset schema:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first last simple">
<li><dl class="first docutils">
<dt><em>C1,C2…</em></dt>
<dd>Text values produced from splitting.</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select strsplit(&#39;First,Second,Third&#39;, &#39;dialect:csv&#39;)&quot;</span><span class="p">)</span>
<span class="go">C1    | C2     | C3</span>
<span class="go">----------------------</span>
<span class="go">First | Second | Third</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select strsplit(&#39;-First-%Second%-Third-&#39;,&#39;delimiter:%&#39;,&#39;quotechar:-&#39;)&quot;</span><span class="p">)</span>
<span class="go">C1    | C2     | C3</span>
<span class="go">----------------------</span>
<span class="go">First | Second | Third</span>
</pre></div>
</div>
</div></blockquote>
<dl class="docutils">
<dt><strong>strsplitv function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.formating.strsplitv">
<code class="descname">strsplitv</code><span class="sig-paren">(</span><em>str</em><span class="optional">[</span>, <em>formatting options</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; [C1]<a class="headerlink" href="#functions.row.formating.strsplitv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Splits in rows <em>str</em> according to <em>formatting options</em>, default behavior is to split on space.
It is a multiset operator that returns one column but many rows. <a class="reference internal" href="#formattingopts"><span class="std std-ref">Formatting options</span></a> are like in <a class="reference internal" href="#functions.row.formating.strsplit" title="functions.row.formating.strsplit"><code class="xref py py-func docutils literal"><span class="pre">strsplit()</span></code></a> function.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="manual.html#tutmultiset"><span class="std std-ref">Multisets</span></a> functions</li>
</ul>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select strsplitv(&#39;First,Second,Third&#39;,&#39;dialect:csv&#39;)&quot;</span><span class="p">)</span>
<span class="go">C1</span>
<span class="go">------</span>
<span class="go">First</span>
<span class="go">Second</span>
<span class="go">Third</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select strsplitv(&#39;First Second Third&#39;)&quot;</span><span class="p">)</span>
<span class="go">C1</span>
<span class="go">------</span>
<span class="go">First</span>
<span class="go">Second</span>
<span class="go">Third</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.htmlops">
<span id="htmlops-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">htmlops</span></code> functions<a class="headerlink" href="#module-functions.row.htmlops" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>htmladdbreaks function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.htmlops.url">
<code class="descname">url</code><span class="sig-paren">(</span><em>href</em>, <em>linktext</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.htmlops.url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the a url pointing to <em>href</em> and having the link text <em>linktext</em>.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select htmladdbreaks(&#39;very-long/string&#39;) as brokenhtml&quot;</span><span class="p">)</span>
<span class="go">brokenhtml</span>
<span class="go">--------------------------</span>
<span class="go">very-&lt;wbr&gt;long/&lt;wbr&gt;string</span>
</pre></div>
</div>
</dd>
<dt><strong>htmldecode function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.htmlops.htmldecode">
<code class="descname">htmldecode</code><span class="sig-paren">(</span><em>str</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.htmlops.htmldecode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the html decoded <em>str</em>.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select htmldecode(&#39;(&amp;quot;die+wunderbaren+jahre&amp;quot;)&#39;) as query&quot;</span><span class="p">)</span>
<span class="go">query</span>
<span class="go">-------------------------</span>
<span class="go">(&quot;die+wunderbaren+jahre&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select htmldecode(null) as query&quot;</span><span class="p">)</span>
<span class="go">query</span>
<span class="go">-----</span>
<span class="go">None</span>
</pre></div>
</div>
</dd>
<dt><strong>htmlencode function</strong></dt>
<dd><dl class="first function">
<dt>
<code class="descname">htmldecode</code><span class="sig-paren">(</span><em>str</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<p>Returns the html decoded <em>str</em>.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select htmldecode(&#39;(&amp;quot;die+wunderbaren+jahre&amp;quot;)&#39;) as query&quot;</span><span class="p">)</span>
<span class="go">query</span>
<span class="go">-------------------------</span>
<span class="go">(&quot;die+wunderbaren+jahre&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select htmldecode(null) as query&quot;</span><span class="p">)</span>
<span class="go">query</span>
<span class="go">-----</span>
<span class="go">None</span>
</pre></div>
</div>
</dd>
<dt><strong>htmllink function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.htmlops.htmllink">
<code class="descname">htmllink</code><span class="sig-paren">(</span><em>href</em>, <em>linktext</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.htmlops.htmllink" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the an html link pointing to <em>href</em> and having the link text <em>linktext</em>.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select htmllink(&#39;http://somewhere.org&#39;) as url&quot;</span><span class="p">)</span> 
<span class="go">url</span>
<span class="go">-----------------------------------------------------------------</span>
<span class="go">&lt;a href=&quot;http://somewhere.org&quot;&gt;http://&lt;wbr&gt;somewhere.&lt;wbr&gt;org&lt;/a&gt;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select htmllink(&#39;somewhere.org&#39;) as url&quot;</span><span class="p">)</span>
<span class="go">url</span>
<span class="go">-----------------------------------------------------</span>
<span class="go">&lt;a href=&quot;http://somewhere.org&quot;&gt;somewhere.&lt;wbr&gt;org&lt;/a&gt;</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select htmllink(&#39;somewhere.org&#39;, &#39;go somewhere&#39;) as url&quot;</span><span class="p">)</span>
<span class="go">url</span>
<span class="go">-----------------------------------------------</span>
<span class="go">&lt;a href=&quot;http://somewhere.org&quot;&gt;go somewhere&lt;/a&gt;</span>
</pre></div>
</div>
</dd>
<dt><strong>htmlstriptags function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.htmlops.htmlstriptags">
<code class="descname">htmlstriptags</code><span class="sig-paren">(</span><em>str</em>, <em>default_tag_conversion</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.htmlops.htmlstriptags" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Strips the html tags of input. It also converts “&lt;br&gt;” tags to new lines. If a default_tag_conversion is provided
then tags that would have been erased are converted to <em>default_tag_conversion</em>.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select htmlstriptags(&#39;&lt;tag1&gt;asdf&lt;&gt;as&lt; br&gt;df&lt;p class = lala&gt;spaced&lt;/sp&gt;paragraph&lt;/p&gt;anotherline&lt;tag2&gt; w&lt;sup&gt;3&lt;/sup&gt;&#39;) as query&quot;</span><span class="p">)</span>
<span class="go">query</span>
<span class="go">-------------------------------------------</span>
<span class="go">asdfas</span>
<span class="go">df spaced paragraph</span>
<span class="go">anotherline w_3</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select htmlstriptags(&#39;&lt;tag1&gt;asdf&lt;&gt;as&lt; br&gt;df&lt;p class = lala&gt;spaced&lt;/sp&gt;paragraph&lt;/p&gt;anotherline&lt;tag2&gt; w&lt;sup&gt;3&lt;/sup&gt;&#39;, &#39;***&#39;) as query&quot;</span><span class="p">)</span>
<span class="go">query</span>
<span class="go">----------------------------------------------------</span>
<span class="go">***asdf***as</span>
<span class="go">df spaced paragraph</span>
<span class="go">anotherline*** w_3</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select htmlstriptags(null) as query&quot;</span><span class="p">)</span>
<span class="go">query</span>
<span class="go">-----</span>
</pre></div>
</div>
</dd>
<dt><strong>urldecode function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.htmlops.urldecode">
<code class="descname">urldecode</code><span class="sig-paren">(</span><em>str</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.htmlops.urldecode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the url decoded <em>str</em>.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select urldecode(&#39;where%2Ccollid%3Dcolid+and+u%3D%27val%27&#39;) as query&quot;</span><span class="p">)</span>
<span class="go">query</span>
<span class="go">------------------------------</span>
<span class="go">where,collid=colid and u=&#39;val&#39;</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select urldecode(null) as query&quot;</span><span class="p">)</span>
<span class="go">query</span>
<span class="go">-----</span>
<span class="go">None</span>
</pre></div>
</div>
</dd>
<dt><strong>urlencode function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.htmlops.urlescape">
<code class="descname">urlescape</code><span class="sig-paren">(</span><em>str</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.htmlops.urlescape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the escaped URL.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select urlencode(&#39;where, collid=colid&#39;) as query&quot;</span><span class="p">)</span>
<span class="go">query</span>
<span class="go">-----------------------</span>
<span class="go">where%2C+collid%3Dcolid</span>
</pre></div>
</div>
</dd>
<dt><strong>urllocation function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.htmlops.urllocation">
<code class="descname">urllocation</code><span class="sig-paren">(</span><em>str</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#functions.row.htmlops.urllocation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the location part of provided URL.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">http://www.test.com/apath/bpath/fname.pdf</span>
<span class="gp">... </span><span class="s1">http://www.test.com/search.csv;p=5?q=test#hl=en</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select urllocation(a) from table1&quot;</span><span class="p">)</span>
<span class="go">urllocation(a)</span>
<span class="go">-----------------------------------------</span>
<span class="go">http://www.test.com/apath/bpath/fname.pdf</span>
<span class="go">http://www.test.com/search.csv</span>
</pre></div>
</div>
</dd>
<dt><strong>urlquery2jdict function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.htmlops.urlquery2jdict">
<code class="descname">urlquery2jdict</code><span class="sig-paren">(</span><em>URL or URL_query_part</em><span class="sig-paren">)</span> &#x2192; JDICT<a class="headerlink" href="#functions.row.htmlops.urlquery2jdict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Converts the query part of a URL into a JSON associative array.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">&#39;url_ver=ver1&amp;url_tim=2011-01-01T00%3A02%3A40Z&#39;</span>
<span class="gp">... </span><span class="s1">&#39;url_tim=2011-01-01T00%3A02%3A40Z&amp;url_ver=ver1&#39;</span>
<span class="gp">... </span><span class="s1">http://www.test.com/search.csv;p=5?lang=test&amp;ver=en</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select urlquery2jdict(a) from table1&quot;</span><span class="p">)</span>
<span class="go">urlquery2jdict(a)</span>
<span class="go">---------------------------------------------------</span>
<span class="go">{&quot;url_tim&quot;:&quot;2011-01-01T00:02:40Z&quot;,&quot;url_ver&quot;:&quot;ver1&quot;}</span>
<span class="go">{&quot;url_tim&quot;:&quot;2011-01-01T00:02:40Z&quot;,&quot;url_ver&quot;:&quot;ver1&quot;}</span>
<span class="go">{&quot;lang&quot;:&quot;test&quot;,&quot;ver&quot;:&quot;en&quot;}</span>
</pre></div>
</div>
</dd>
<dt><strong>urlsplit function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.htmlops.urlsplit">
<code class="descname">urlsplit</code><span class="sig-paren">(</span><em>text1</em><span class="optional">[</span>, <em>text2</em>, <em>...</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; multiset<a class="headerlink" href="#functions.row.htmlops.urlsplit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Breaks a given URL into multiple fields. The returned table schema is:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">scheme:</th><td class="field-body">What type the URL is (e.g. http, ftp …)</td>
</tr>
<tr class="field-even field"><th class="field-name">netloc:</th><td class="field-body">Network location of URL (e.g. www.text.com)</td>
</tr>
<tr class="field-odd field"><th class="field-name">path:</th><td class="field-body">Path part of URL (e.g. /data/2010/). It always has a slash at the end</td>
</tr>
<tr class="field-even field"><th class="field-name">filename:</th><td class="field-body">Filename part of URL</td>
</tr>
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">Mime type of URL, or if not a mime type exists, the extension part of filename.</td>
</tr>
<tr class="field-even field"><th class="field-name">subtype:</th><td class="field-body">Mime subtype of URL.</td>
</tr>
<tr class="field-odd field"><th class="field-name">params:</th><td class="field-body">All parameters following ‘;’ in URL.</td>
</tr>
<tr class="field-even field"><th class="field-name">query:</th><td class="field-body">All parameters following ‘?’ in URL.</td>
</tr>
<tr class="field-odd field"><th class="field-name">fragment:</th><td class="field-body">All parameters following ‘#’ in URL.</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">http://www.test.com/apath/bpath/fname.pdf</span>
<span class="gp">... </span><span class="s1">http://www.test.com/search.csv;p=5?q=test#hl=en</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select urlsplit(a) from table1&quot;</span><span class="p">)</span>
<span class="go">scheme | netloc       | path          | filename   | type        | subtype | params | query  | fragment</span>
<span class="go">-------------------------------------------------------------------------------------------------------</span>
<span class="go">http   | www.test.com | /apath/bpath/ | fname.pdf  | application | pdf     |        |        |</span>
<span class="go">http   | www.test.com | /             | search.csv | csv         |         | p=5    | q=test | hl=en</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.iptools">
<span id="iptools-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">iptools</span></code> functions<a class="headerlink" href="#module-functions.row.iptools" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>ip2long function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.iptools.ip2long">
<code class="descname">ip2long</code><span class="sig-paren">(</span><em>ip</em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#functions.row.iptools.ip2long" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Converts a decimal dotted quad IP string to long integer IP format.
It can take either one column of IP strings or 4 columns each having one
part of the IP address.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select ip2long(&#39;123.123.123.123&#39;)&quot;</span><span class="p">)</span>
<span class="go">ip2long(&#39;123.123.123.123&#39;)</span>
<span class="go">--------------------------</span>
<span class="go">2071690107</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select ip2long(123,123,123,123)&quot;</span><span class="p">)</span>
<span class="go">ip2long(123,123,123,123)</span>
<span class="go">------------------------</span>
<span class="go">2071690107</span>
</pre></div>
</div>
</dd>
<dt><strong>ip_prefix function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.iptools.ip_prefix">
<code class="descname">ip_prefix</code><span class="sig-paren">(</span><em>ip</em>, <em>class_number</em><span class="sig-paren">)</span> &#x2192; ip<a class="headerlink" href="#functions.row.iptools.ip_prefix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the subnetwork class of an IP address.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;ip_prefix &#39;123.34.24.54&#39; &quot;</span><span class="p">)</span>
<span class="go">ip_prefix(&#39;123.34.24.54&#39;)</span>
<span class="go">-------------------------</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;ip_prefix &#39;123.34.24.54&#39; &#39;3&#39;&quot;</span><span class="p">)</span>
<span class="go">ip_prefix(&#39;123.34.24.54&#39;,&#39;3&#39;)</span>
<span class="go">-----------------------------</span>
<span class="go">123.34.24</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;ip_prefix &#39;123.34.24.54&#39; &#39;2&#39;&quot;</span><span class="p">)</span>
<span class="go">ip_prefix(&#39;123.34.24.54&#39;,&#39;2&#39;)</span>
<span class="go">-----------------------------</span>
<span class="go">123.34</span>
</pre></div>
</div>
</dd>
<dt><strong>long2ip function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.iptools.long2ip">
<code class="descname">long2ip</code><span class="sig-paren">(</span><em>int</em><span class="sig-paren">)</span> &#x2192; ip<a class="headerlink" href="#functions.row.iptools.long2ip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Convert longint IP to dotted quad string</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select long2ip(&#39;2071690107&#39;)&quot;</span><span class="p">)</span>
<span class="go">long2ip(&#39;2071690107&#39;)</span>
<span class="go">---------------------</span>
<span class="go">123.123.123.123</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select long2ip(2071690107)&quot;</span><span class="p">)</span>
<span class="go">long2ip(2071690107)</span>
<span class="go">-------------------</span>
<span class="go">123.123.123.123</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.jpacks">
<span id="jpacks-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">jpacks</span></code> functions<a class="headerlink" href="#module-functions.row.jpacks" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>j2nl function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.j2nl">
<code class="descname">j2nl</code><span class="sig-paren">(</span><em>jpack</em><span class="sig-paren">)</span> &#x2192; text<a class="headerlink" href="#functions.row.jpacks.j2nl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Converts multiple input jpacks to a newline separated text.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select j2nl(&#39;[1,2,3]&#39;)&quot;</span><span class="p">)</span> 
<span class="go">j2nl(&#39;[1,2,3]&#39;)</span>
<span class="go">---------------</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select j2nl(&#39;[1,2,3]&#39;,&#39;a&#39;)&quot;</span><span class="p">)</span> 
<span class="go">j2nl(&#39;[1,2,3]&#39;,&#39;a&#39;)</span>
<span class="go">-------------------</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">a</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select j2nl(&#39;a&#39;, &#39;b&#39;)&quot;</span><span class="p">)</span> 
<span class="go">j2nl(&#39;a&#39;, &#39;b&#39;)</span>
<span class="go">--------------</span>
<span class="go">a</span>
<span class="go">b</span>
</pre></div>
</div>
</dd>
<dt><strong>j2s function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.j2s">
<code class="descname">j2s</code><span class="sig-paren">(</span><em>jpack</em><span class="sig-paren">)</span> &#x2192; space separated string<a class="headerlink" href="#functions.row.jpacks.j2s" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Converts multiple input jpacks to a space separated string. Newlines are converted to spaces.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select j2s(&#39;[1,2,3]&#39;)&quot;</span><span class="p">)</span> 
<span class="go">j2s(&#39;[1,2,3]&#39;)</span>
<span class="go">--------------</span>
<span class="go">1 2 3</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select j2s(&#39;[1,2,3]&#39;,&#39;a&#39;)&quot;</span><span class="p">)</span> 
<span class="go">j2s(&#39;[1,2,3]&#39;,&#39;a&#39;)</span>
<span class="go">------------------</span>
<span class="go">1 2 3 a</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select j2s(&#39;a&#39;, &#39;b&#39;)&quot;</span><span class="p">)</span> 
<span class="go">j2s(&#39;a&#39;, &#39;b&#39;)</span>
<span class="go">-------------</span>
<span class="go">a b</span>
</pre></div>
</div>
</dd>
<dt><strong>j2t function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.j2t">
<code class="descname">j2t</code><span class="sig-paren">(</span><em>jpack</em><span class="sig-paren">)</span> &#x2192; tabpack<a class="headerlink" href="#functions.row.jpacks.j2t" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Converts multiple input jpacks to a tab separated pack (tab separated values). If tab or newline characters are found in
the source jpack they are converted to spaces.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select j2t(&#39;[1,2,3]&#39;)&quot;</span><span class="p">)</span> 
<span class="go">j2t(&#39;[1,2,3]&#39;)</span>
<span class="go">--------------</span>
<span class="go">1        2        3</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select j2t(&#39;[1,2,3]&#39;,&#39;a&#39;)&quot;</span><span class="p">)</span> 
<span class="go">j2t(&#39;[1,2,3]&#39;,&#39;a&#39;)</span>
<span class="go">------------------</span>
<span class="go">1        2        3        a</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select j2t(&#39;a&#39;, &#39;b&#39;)&quot;</span><span class="p">)</span> 
<span class="go">j2t(&#39;a&#39;, &#39;b&#39;)</span>
<span class="go">-------------</span>
<span class="go">a        b</span>
</pre></div>
</div>
</dd>
<dt><strong>jchars function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jletters">
<code class="descname">jletters</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span> &#x2192; character jpack<a class="headerlink" href="#functions.row.jpacks.jletters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Splits an input text into its composing characters.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jchars(&#39;this is a text&#39;)&quot;</span><span class="p">)</span>
<span class="go">jchars(&#39;this is a text&#39;)</span>
<span class="go">---------------------------------------------------------</span>
<span class="go">[&quot;t&quot;,&quot;h&quot;,&quot;i&quot;,&quot;s&quot;,&quot; &quot;,&quot;i&quot;,&quot;s&quot;,&quot; &quot;,&quot;a&quot;,&quot; &quot;,&quot;t&quot;,&quot;e&quot;,&quot;x&quot;,&quot;t&quot;]</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jchars(&#39;another&#39;, &#39;text&#39;)&quot;</span><span class="p">)</span>
<span class="go">jchars(&#39;another&#39;, &#39;text&#39;)</span>
<span class="go">---------------------------------------------</span>
<span class="go">[&quot;a&quot;,&quot;n&quot;,&quot;o&quot;,&quot;t&quot;,&quot;h&quot;,&quot;e&quot;,&quot;r&quot;,&quot;t&quot;,&quot;e&quot;,&quot;x&quot;,&quot;t&quot;]</span>
</pre></div>
</div>
</dd>
<dt><strong>jcombinations function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jcombinations">
<code class="descname">jcombinations</code><span class="sig-paren">(</span><em>jpack</em>, <em>r</em><span class="sig-paren">)</span> &#x2192; multiset<a class="headerlink" href="#functions.row.jpacks.jcombinations" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns all length r combinations of jpack.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jcombinations(&#39;[&quot;t1&quot;,&quot;t2&quot;,&quot;t3&quot;]&#39;,2)&#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">C1 | C2</span>
<span class="go">-------</span>
<span class="go">t1 | t2</span>
<span class="go">t1 | t3</span>
<span class="go">t2 | t3</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jcombinations(&#39;[&quot;t1&quot;,&quot;t2&quot;,[&quot;t3&quot;,&quot;t4&quot;]]&#39;,2)&#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">C1 | C2</span>
<span class="go">----------------</span>
<span class="go">t1 | t2</span>
<span class="go">t1 | [&quot;t3&quot;,&quot;t4&quot;]</span>
<span class="go">t2 | [&quot;t3&quot;,&quot;t4&quot;]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jcombinations(null,2)&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jcombinations(&#39;[&quot;t1&quot;,&quot;t2&quot;,&quot;t3&quot;,&quot;t4&quot;]&#39;)&#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">C1</span>
<span class="go">--</span>
<span class="go">t1</span>
<span class="go">t2</span>
<span class="go">t3</span>
<span class="go">t4</span>
</pre></div>
</div>
</dd>
<dt><strong>jdict function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jdict">
<code class="descname">jdict</code><span class="sig-paren">(</span><em>key</em>, <em>value</em>, <em>key1</em>, <em>value1</em><span class="sig-paren">)</span> &#x2192; jdict<a class="headerlink" href="#functions.row.jpacks.jdict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns a jdict of the keys and value pairs.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdict(&#39;key1&#39;, &#39;val1&#39;, &#39;key2&#39;, &#39;val2&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jdict(&#39;key1&#39;, &#39;val1&#39;, &#39;key2&#39;, &#39;val2&#39;)</span>
<span class="go">-------------------------------------</span>
<span class="go">{&quot;key1&quot;:&quot;val1&quot;,&quot;key2&quot;:&quot;val2&quot;}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdict(&#39;key&#39;, &#39;{&quot;k1&quot;:1,&quot;k2&quot;:2}&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jdict(&#39;key&#39;, &#39;{&quot;k1&quot;:1,&quot;k2&quot;:2}&#39;)</span>
<span class="go">-------------------------------</span>
<span class="go">{&quot;key&quot;:{&quot;k1&quot;:1,&quot;k2&quot;:2}}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdict(&#39;key&#39;, &#39;[&quot;val1&quot;, &quot;val2&quot;]&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jdict(&#39;key&#39;, &#39;[&quot;val1&quot;, &quot;val2&quot;]&#39;)</span>
<span class="go">--------------------------------</span>
<span class="go">{&quot;key&quot;:[&quot;val1&quot;,&quot;val2&quot;]}</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdict(&#39;1&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">OperatorError</span>: <span class="n">Madis SQLError:</span>
<span class="go">Operator JDICT: At least two arguments required</span>
</pre></div>
</div>
</dd>
<dt><strong>jdictgroupkey function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jdictgroupkey">
<code class="descname">jdictgroupkey</code><span class="sig-paren">(</span><em>list_of_jdicts</em>, <em>groupkey1</em>, <em>groupkey2</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.jpacks.jdictgroupkey" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>It groups an array of jdicts into a hierarchical structure. The grouping is done
first by groupkey1 then by groupkey2 and so on.</p>
<p>If no groupkeys are provided, then the first key of array’s first jdict is used as a groupkey.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jdictgroupkey(&#39;[{&quot;gkey&quot;:&quot;v1&quot;, &quot;b&quot;:1},{&quot;gkey&quot;:&quot;v1&quot;,&quot;b&quot;:2},{&quot;gkey&quot;:&quot;v2&quot;,&quot;b&quot;:1, &quot;c&quot;:2}]&#39;) as j&#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">j</span>
<span class="go">---------------------------------------------</span>
<span class="go">{&quot;v1&quot;:[{&quot;b&quot;:1},{&quot;b&quot;:2}],&quot;v2&quot;:[{&quot;b&quot;:1,&quot;c&quot;:2}]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jdictgroupkey(&#39;[{&quot;gkey&quot;:&quot;v1&quot;, &quot;b&quot;:1},{&quot;gkey&quot;:&quot;v1&quot;,&quot;b&quot;:2},{&quot;gkey&quot;:&quot;v2&quot;,&quot;b&quot;:1, &quot;c&quot;:2}]&#39;, &quot;gkey&quot;) as j&#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">j</span>
<span class="go">---------------------------------------------</span>
<span class="go">{&quot;v1&quot;:[{&quot;b&quot;:1},{&quot;b&quot;:2}],&quot;v2&quot;:[{&quot;b&quot;:1,&quot;c&quot;:2}]}</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jdictgroupkey(&#39;[{&quot;gkey&quot;:&quot;v1&quot;, &quot;gkey2&quot;:&quot;f1&quot;, &quot;b&quot;:1},{&quot;gkey&quot;:&quot;v1&quot;, &quot;gkey2&quot;:&quot;f2&quot;, &quot;b&quot;:2},{&quot;gkey&quot;:&quot;v1&quot;, &quot;gkey2&quot;:&quot;f2&quot;, &quot;b&quot;:1, &quot;c&quot;:2}]&#39;, &quot;gkey&quot;, &quot;gkey2&quot;) as j&#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">j</span>
<span class="go">--------------------------------------------------------------</span>
<span class="go">{&quot;v1&quot;:{&quot;gkey2&quot;:{&quot;f1&quot;:[{&quot;b&quot;:1}],&quot;f2&quot;:[{&quot;b&quot;:2},{&quot;b&quot;:1,&quot;c&quot;:2}]}}}</span>
</pre></div>
</div>
</dd>
<dt><strong>jdictkeys function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jdictkeys">
<code class="descname">jdictkeys</code><span class="sig-paren">(</span><em>jdict</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.jdictkeys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns a jpack of the keys of input jdict</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdictkeys(&#39;{&quot;k1&quot;:1,&quot;k2&quot;:2}&#39;, &#39;{&quot;k1&quot;:1,&quot;k3&quot;:2}&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jdictkeys(&#39;{&quot;k1&quot;:1,&quot;k2&quot;:2}&#39;, &#39;{&quot;k1&quot;:1,&quot;k3&quot;:2}&#39;)</span>
<span class="go">-----------------------------------------------</span>
<span class="go">[&quot;k1&quot;,&quot;k2&quot;,&quot;k3&quot;]</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdictkeys(&#39;{&quot;k1&quot;:1,&quot;k2&quot;:2}&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jdictkeys(&#39;{&quot;k1&quot;:1,&quot;k2&quot;:2}&#39;)</span>
<span class="go">----------------------------</span>
<span class="go">[&quot;k1&quot;,&quot;k2&quot;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdictkeys(&#39;test&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jdictkeys(&#39;test&#39;)</span>
<span class="go">-----------------</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdictkeys(1) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jdictkeys(1)</span>
<span class="go">------------</span>
<span class="go">[]</span>
</pre></div>
</div>
</dd>
<dt><strong>jdictsplit function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jdictsplit">
<code class="descname">jdictsplit</code><span class="sig-paren">(</span><em>jdict</em><span class="optional">[</span>, <em>key1</em>, <em>key2</em>, <em>..</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; columns<a class="headerlink" href="#functions.row.jpacks.jdictsplit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>If only the first argument (jdict) is provided, it returns a row containing the values of input jdict (sorted by the jdict keys).</p>
<p>If key values are also provided, it returns only the columns of which the keys have been provided.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdictsplit(&#39;{&quot;k1&quot;:1,&quot;k2&quot;:2}&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">k1 | k2</span>
<span class="go">-------</span>
<span class="go">1  | 2</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdictsplit(&#39;{&quot;k1&quot;:1,&quot;k2&quot;:2, &quot;k3&quot;:3}&#39;, &#39;k3&#39;, &#39;k1&#39;, &#39;k4&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">k3 | k1 | k4</span>
<span class="go">--------------</span>
<span class="go">3  | 1  | None</span>
</pre></div>
</div>
</dd>
<dt><strong>jdictsplitv function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jdictsplitv">
<code class="descname">jdictsplitv</code><span class="sig-paren">(</span><em>jdict</em><span class="optional">[</span>, <em>key1</em>, <em>key2</em>, <em>..</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; columns<a class="headerlink" href="#functions.row.jpacks.jdictsplitv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>If only the first argument (jdict) is provided, it returns rows containing the values of input jdict.</p>
<p>If key values are also provided, it returns only the columns of which the keys have been provided.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdictsplitv(&#39;{&quot;k1&quot;:1,&quot;k2&quot;:2}&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">key | val</span>
<span class="go">---------</span>
<span class="go">k1  | 1</span>
<span class="go">k2  | 2</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdictsplitv(&#39;{&quot;k1&quot;:1,&quot;k2&quot;:2, &quot;k3&quot;:3}&#39;, &#39;k3&#39;, &#39;k1&#39;, &#39;k4&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">key | val</span>
<span class="go">---------</span>
<span class="go">k3  | 3</span>
<span class="go">k1  | 1</span>
</pre></div>
</div>
</dd>
<dt><strong>jdictvals function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jdictvals">
<code class="descname">jdictvals</code><span class="sig-paren">(</span><em>jdict</em><span class="optional">[</span>, <em>key1</em>, <em>key2</em>, <em>..</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.jdictvals" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>If only the first argument (jdict) is provided, it returns a jpack of the values of input jdict (sorted by the jdict keys).</p>
<p>If key values are also provided, it returns only the keys that have been provided.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdictvals(&#39;{&quot;k1&quot;:1,&quot;k2&quot;:2}&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jdictvals(&#39;{&quot;k1&quot;:1,&quot;k2&quot;:2}&#39;)</span>
<span class="go">----------------------------</span>
<span class="go">[1,2]</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdictvals(&#39;{&quot;k1&quot;:1,&quot;k2&quot;:2, &quot;k3&quot;:3}&#39;, &#39;k3&#39;, &#39;k1&#39;, &#39;k4&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jdictvals(&#39;{&quot;k1&quot;:1,&quot;k2&quot;:2, &quot;k3&quot;:3}&#39;, &#39;k3&#39;, &#39;k1&#39;, &#39;k4&#39;)</span>
<span class="go">------------------------------------------------------</span>
<span class="go">[3,1,null]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdictvals(&#39;{&quot;k1&quot;:1}&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jdictvals(&#39;{&quot;k1&quot;:1}&#39;)</span>
<span class="go">---------------------</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdictvals(&#39;{&quot;k1&quot;:1}&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jdictvals(&#39;{&quot;k1&quot;:1}&#39;)</span>
<span class="go">---------------------</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jdictvals(1) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jdictvals(1)</span>
<span class="go">------------</span>
<span class="go">1</span>
</pre></div>
</div>
</dd>
<dt><strong>jexcept function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jexcept">
<code class="descname">jexcept</code><span class="sig-paren">(</span><em>jpackA</em>, <em>jpackB</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.jexcept" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the items of jpackA except the items that appear on jpackB.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jexcept(&#39;[1,2,3]&#39;, &#39;[1,2,3]&#39;)&quot;</span><span class="p">)</span> 
<span class="go">jexcept(&#39;[1,2,3]&#39;, &#39;[1,2,3]&#39;)</span>
<span class="go">-----------------------------</span>
<span class="go">[]</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jexcept(&#39;[1,2,3]&#39;, &#39;[1,3]&#39;)&quot;</span><span class="p">)</span> 
<span class="go">jexcept(&#39;[1,2,3]&#39;, &#39;[1,3]&#39;)</span>
<span class="go">---------------------------</span>
<span class="go">2</span>
</pre></div>
</div>
</dd>
<dt><strong>jfilterempty function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jfilterempty">
<code class="descname">jfilterempty</code><span class="sig-paren">(</span><em>jpacks.</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.jfilterempty" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Removes from input jpacks all empty elements.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jfilterempty(&#39;a&#39;, &#39;&#39;, &#39;[]&#39;)&quot;</span><span class="p">)</span>
<span class="go">jfilterempty(&#39;a&#39;, &#39;&#39;, &#39;[]&#39;)</span>
<span class="go">---------------------------</span>
<span class="go">a</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jfilterempty(&#39;a&#39;,&#39;[null]&#39;,3)&quot;</span><span class="p">)</span>
<span class="go">jfilterempty(&#39;a&#39;,&#39;[null]&#39;,3)</span>
<span class="go">----------------------------</span>
<span class="go">[&quot;a&quot;,3]</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jfilterempty(&#39;[3]&#39;, jpack(&#39;b&#39;, &#39;&#39;))&quot;</span><span class="p">)</span>
<span class="go">jfilterempty(&#39;[3]&#39;, jpack(&#39;b&#39;, &#39;&#39;))</span>
<span class="go">-----------------------------------</span>
<span class="go">[3,&quot;b&quot;]</span>
</pre></div>
</div>
</dd>
<dt><strong>jflatten function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jflattten">
<code class="descname">jflattten</code><span class="sig-paren">(</span><em>jpacks</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.jflattten" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Flattens all nested sub-jpacks.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jflatten(&#39;1&#39;, &#39;[2]&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jflatten(&#39;1&#39;, &#39;[2]&#39;)</span>
<span class="go">--------------------</span>
<span class="go">[&quot;1&quot;,2]</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jflatten(&#39;[[&quot;word1&quot;, 1], [&quot;word2&quot;, 1], [[&quot;word3&quot;, 2], [&quot;word4&quot;, 2]], 3]&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jflatten(&#39;[[&quot;word1&quot;, 1], [&quot;word2&quot;, 1], [[&quot;word3&quot;, 2], [&quot;word4&quot;, 2]], 3]&#39;)</span>
<span class="go">-------------------------------------------------------------------------</span>
<span class="go">[&quot;word1&quot;,1,&quot;word2&quot;,1,&quot;word3&quot;,2,&quot;word4&quot;,2,3]</span>
</pre></div>
</div>
</dd>
<dt><strong>jfrequentwords function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jfrequentwords">
<code class="descname">jfrequentwords</code><span class="sig-paren">(</span><em>args...</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.jfrequentwords" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p class="last">Returns the frequent words of a text in a jpack</p>
</dd>
<dt><strong>jintersection function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jintersection">
<code class="descname">jintersection</code><span class="sig-paren">(</span><em>jpackA</em>, <em>jpackB</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.jintersection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the items of jpackA except the items that appear on jpackB.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jintersection(&#39;[1,2,3]&#39;, &#39;[1,2,3]&#39;)&quot;</span><span class="p">)</span> 
<span class="go">jintersection(&#39;[1,2,3]&#39;, &#39;[1,2,3]&#39;)</span>
<span class="go">-----------------------------------</span>
<span class="go">[1,2,3]</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jintersection(&#39;[1,2,3]&#39;, &#39;[1,3]&#39;, 1)&quot;</span><span class="p">)</span> 
<span class="go">jintersection(&#39;[1,2,3]&#39;, &#39;[1,3]&#39;, 1)</span>
<span class="go">------------------------------------</span>
<span class="go">1</span>
</pre></div>
</div>
</dd>
<dt><strong>jlen function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jlen">
<code class="descname">jlen</code><span class="sig-paren">(</span><em>args...</em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#functions.row.jpacks.jlen" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the total length in elements of the input jpacks.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jlen(&#39;abc&#39;)&quot;</span><span class="p">)</span>
<span class="go">jlen(&#39;abc&#39;)</span>
<span class="go">-----------</span>
<span class="go">1</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jlen(&#39;a&#39;,&#39;b&#39;,3)&quot;</span><span class="p">)</span>
<span class="go">jlen(&#39;a&#39;,&#39;b&#39;,3)</span>
<span class="go">---------------</span>
<span class="go">3</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jlen(&#39;a&#39;, jpack(&#39;b&#39;,3))&quot;</span><span class="p">)</span>
<span class="go">jlen(&#39;a&#39;, jpack(&#39;b&#39;,3))</span>
<span class="go">-----------------------</span>
<span class="go">3</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jlen(&#39;[1,2,3]&#39;)&quot;</span><span class="p">)</span>
<span class="go">jlen(&#39;[1,2,3]&#39;)</span>
<span class="go">---------------</span>
<span class="go">3</span>
</pre></div>
</div>
</dd>
<dt><strong>jlengthiest function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jlengthiest">
<code class="descname">jlengthiest</code><span class="sig-paren">(</span><em>jpacks.</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.jlengthiest" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the string with the greatest length contained in the jpacks.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jlengthiest(&#39;a&#39;, &#39;&#39;, &#39;[]&#39;)&quot;</span><span class="p">)</span>
<span class="go">jlengthiest(&#39;a&#39;, &#39;&#39;, &#39;[]&#39;)</span>
<span class="go">--------------------------</span>
<span class="go">a</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jlengthiest(&#39;a&#39;,&#39;longer&#39;,3)&quot;</span><span class="p">)</span>
<span class="go">jlengthiest(&#39;a&#39;,&#39;longer&#39;,3)</span>
<span class="go">---------------------------</span>
<span class="go">longer</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jlengthiest(&#39;[3]&#39;, jpack(&#39;b&#39;, &#39;&#39;))&quot;</span><span class="p">)</span>
<span class="go">jlengthiest(&#39;[3]&#39;, jpack(&#39;b&#39;, &#39;&#39;))</span>
<span class="go">----------------------------------</span>
<span class="go">3</span>
</pre></div>
</div>
</dd>
<dt><strong>jmerge function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jmerge">
<code class="descname">jmerge</code><span class="sig-paren">(</span><em>jpacks</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.jmerge" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Merges multiple jpacks into one jpack.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jmerge(&#39;[1,2,3]&#39;, &#39;[1,2,3]&#39;, &#39;a&#39;, 3 )&quot;</span><span class="p">)</span> 
<span class="go">jmerge(&#39;[1,2,3]&#39;, &#39;[1,2,3]&#39;, &#39;a&#39;, 3 )</span>
<span class="go">-------------------------------------</span>
<span class="go">[1,2,3,1,2,3,&quot;a&quot;,3]</span>
</pre></div>
</div>
</dd>
<dt><strong>jmergeregexp function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jmergeregexp">
<code class="descname">jmergeregexp</code><span class="sig-paren">(</span><em>jpacks</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.jmergeregexp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Creates a regular expression that matches all of the jpack’s contents. If the input
jpack contains keyword pairs, then jmergeregexp returns a regular expression
with named groups.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jmergeregexp(&#39;[&quot;abc&quot;, &quot;def&quot;]&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jmergeregexp(&#39;[&quot;abc&quot;, &quot;def&quot;]&#39;)</span>
<span class="go">------------------------------</span>
<span class="go">(?:abc)|(?:def)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jmergeregexp(&#39;[[&quot;pos&quot;, &quot;p1&quot;], [&quot;neg&quot;, &quot;n1&quot;], [&quot;pos&quot;, &quot;p2&quot;]]&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jmergeregexp(&#39;[[&quot;pos&quot;, &quot;p1&quot;], [&quot;neg&quot;, &quot;n1&quot;], [&quot;pos&quot;, &quot;p2&quot;]]&#39;)</span>
<span class="go">-------------------------------------------------------------</span>
<span class="go">(?P&lt;neg&gt;n1)|(?P&lt;pos&gt;p1|p2)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jmergeregexp(&#39;[]&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jmergeregexp(&#39;[]&#39;)</span>
<span class="go">------------------</span>
<span class="go">_^</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jmergeregexp(&#39;[&quot;ab&quot;,&quot;&quot;]&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jmergeregexp(&#39;[&quot;ab&quot;,&quot;&quot;]&#39;)</span>
<span class="go">-------------------------</span>
<span class="go">(?:ab)</span>
</pre></div>
</div>
</dd>
<dt><strong>jmergeregexpnamed function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jmergeregexpnamed">
<code class="descname">jmergeregexpnamed</code><span class="sig-paren">(</span><em>jpacks</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.jmergeregexpnamed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Creates a regular expression that matches all of the jpack’s contents with named groups. If the number of
named groups in a regular expression is greater than 99, then the output will be a jpack of regular expressions.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jmergeregexpnamed(&#39;[&quot;abc&quot;, &quot;def&quot;]&#39;) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jmergeregexpnamed(&#39;[&quot;abc&quot;, &quot;def&quot;]&#39;)</span>
<span class="go">-----------------------------------</span>
<span class="go">(abc)|(def)</span>
</pre></div>
</div>
</dd>
<dt><strong>jngrams function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jngrams">
<code class="descname">jngrams</code><span class="sig-paren">(</span><em>n</em>, <em>text</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.jngrams" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Converts multiple input arguments into a jpack of ngrams.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jngrams(1,&#39;This is a test phrase&#39;)&quot;</span><span class="p">)</span>
<span class="go">jngrams(1,&#39;This is a test phrase&#39;)</span>
<span class="go">-------------------------------------------</span>
<span class="go">[[&quot;This&quot;],[&quot;is&quot;],[&quot;a&quot;],[&quot;test&quot;],[&quot;phrase&quot;]]</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jngrams(2,&#39;This is a test phrase&#39;)&quot;</span><span class="p">)</span>
<span class="go">jngrams(2,&#39;This is a test phrase&#39;)</span>
<span class="go">---------------------------------------------------------</span>
<span class="go">[[&quot;This&quot;,&quot;is&quot;],[&quot;is&quot;,&quot;a&quot;],[&quot;a&quot;,&quot;test&quot;],[&quot;test&quot;,&quot;phrase&quot;]]</span>
</pre></div>
</div>
</dd>
<dt><strong>jpack function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jpack">
<code class="descname">jpack</code><span class="sig-paren">(</span><em>args...</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.jpack" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Converts multiple input arguments into a single string. Jpacks preserve the types
of their inputs and are based on JSON encoding. Single values are represented as
themselves where possible.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jpack(&#39;a&#39;)&quot;</span><span class="p">)</span>
<span class="go">jpack(&#39;a&#39;)</span>
<span class="go">----------</span>
<span class="go">a</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jpack(&#39;a&#39;,&#39;b&#39;,3)&quot;</span><span class="p">)</span>
<span class="go">jpack(&#39;a&#39;,&#39;b&#39;,3)</span>
<span class="go">----------------</span>
<span class="go">[&quot;a&quot;,&quot;b&quot;,3]</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jpack(&#39;a&#39;, jpack(&#39;b&#39;,3))&quot;</span><span class="p">)</span>
<span class="go">jpack(&#39;a&#39;, jpack(&#39;b&#39;,3))</span>
<span class="go">------------------------</span>
<span class="go">[&quot;a&quot;,[&quot;b&quot;,3]]</span>
</pre></div>
</div>
</dd>
<dt><strong>jpermutations function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jpermutations">
<code class="descname">jpermutations</code><span class="sig-paren">(</span><em>jpack</em>, <em>r</em><span class="sig-paren">)</span> &#x2192; multiset<a class="headerlink" href="#functions.row.jpacks.jpermutations" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns all length r permutations of jpack.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jpermutations(&#39;[&quot;t1&quot;,&quot;t2&quot;,&quot;t3&quot;]&#39;,2)&#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">C1 | C2</span>
<span class="go">-------</span>
<span class="go">t1 | t2</span>
<span class="go">t1 | t3</span>
<span class="go">t2 | t1</span>
<span class="go">t2 | t3</span>
<span class="go">t3 | t1</span>
<span class="go">t3 | t2</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jpermutations(&#39;[&quot;t1&quot;,&quot;t2&quot;,[&quot;t3&quot;,&quot;t4&quot;]]&#39;,2)&#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">C1          | C2</span>
<span class="go">-------------------------</span>
<span class="go">t1          | t2</span>
<span class="go">t1          | [&quot;t3&quot;,&quot;t4&quot;]</span>
<span class="go">t2          | t1</span>
<span class="go">t2          | [&quot;t3&quot;,&quot;t4&quot;]</span>
<span class="go">[&quot;t3&quot;,&quot;t4&quot;] | t1</span>
<span class="go">[&quot;t3&quot;,&quot;t4&quot;] | t2</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jpermutations(null,2)&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jpermutations(&#39;[&quot;t1&quot;,&quot;t2&quot;,&quot;t3&quot;,&quot;t4&quot;]&#39;)&#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">C1</span>
<span class="go">--</span>
<span class="go">t1</span>
<span class="go">t2</span>
<span class="go">t3</span>
<span class="go">t4</span>
</pre></div>
</div>
</dd>
<dt><strong>jrange function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jrange">
<code class="descname">jrange</code><span class="sig-paren">(</span><em>num</em><span class="sig-paren">)</span> &#x2192; jrange<a class="headerlink" href="#functions.row.jpacks.jrange" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns a jrange of integer numbers.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jrange(5)&quot;</span><span class="p">)</span>
<span class="go">jrange(&#39;a&#39;)</span>
<span class="go">-----------------</span>
<span class="go">[&quot;0&quot;,&quot;1&quot;,&quot;2&quot;,&quot;3&quot;]</span>
</pre></div>
</div>
</dd>
<dt><strong>jset function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jset">
<code class="descname">jset</code><span class="sig-paren">(</span><em>jpacks</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.jset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns a set representation of a jpack, unifying duplicate items.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jset(&#39;[1,2,3]&#39;, &#39;[1,2,3]&#39;, &#39;b&#39;, &#39;a&#39;, 3 )&quot;</span><span class="p">)</span> 
<span class="go">jset(&#39;[1,2,3]&#39;, &#39;[1,2,3]&#39;, &#39;b&#39;, &#39;a&#39;, 3 )</span>
<span class="go">----------------------------------------</span>
<span class="go">[1,2,3,&quot;a&quot;,&quot;b&quot;]</span>
</pre></div>
</div>
</dd>
<dt><strong>jsonpath function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jsonpath">
<code class="descname">jsonpath</code><span class="sig-paren">(</span><em>JSON</em>, <em>jsonpathexpr1</em>, <em>jsonpathexpr2</em><span class="sig-paren">)</span> &#x2192; multiset<a class="headerlink" href="#functions.row.jpacks.jsonpath" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Uses jsonpath expressions to pick values from inside a JSON input. If the outputs of all JSONpath expressions
have the same number of elements in them, it splits the output into multiple rows.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For more on JSONpath see: <a class="reference external" href="http://goessner.net/articles/JsonPath/">http://goessner.net/articles/JsonPath/</a></p>
</div>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jsonpath(&#39;{&quot;d1&quot;:[{&quot;name&quot;:&quot;n1&quot;, &quot;value&quot;:&quot;v1&quot;}, {&quot;name&quot;:&quot;n2&quot;, &quot;value&quot;:&quot;v2&quot;}]}&#39;, &#39;$.d1&#39;) &#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">C1</span>
<span class="go">-------------------------------------------------------</span>
<span class="go">[{&quot;name&quot;:&quot;n1&quot;,&quot;value&quot;:&quot;v1&quot;},{&quot;name&quot;:&quot;n2&quot;,&quot;value&quot;:&quot;v2&quot;}]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jsonpath(&#39;{&quot;d1&quot;:[{&quot;name&quot;:&quot;n1&quot;, &quot;value&quot;:&quot;v1&quot;}, {&quot;name&quot;:&quot;n2&quot;, &quot;value&quot;:&quot;v2&quot;}]}&#39;, &#39;$.d1[*].name&#39;) &#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">C1</span>
<span class="go">--</span>
<span class="go">n1</span>
<span class="go">n2</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jsonpath(&#39;{&quot;d1&quot;:[{&quot;name&quot;:&quot;n1&quot;, &quot;value&quot;:&quot;v1&quot;}, {&quot;name&quot;:&quot;n2&quot;, &quot;value&quot;:&quot;v2&quot;}]}&#39;, &#39;$.d1[*].name&#39;, &#39;$.d1[*].value&#39;) &#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">C1 | C2</span>
<span class="go">-------</span>
<span class="go">n1 | v1</span>
<span class="go">n2 | v2</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jsonpath(&#39;{&quot;d1&quot;:[{&quot;name&quot;:&quot;n1&quot;, &quot;value&quot;:&quot;v1&quot;}, {&quot;name&quot;:&quot;n2&quot;, &quot;value&quot;:&quot;v2&quot;}]}&#39;, &#39;$.d1[*].name&#39;, &#39;$.d1[*].nonexisting&#39;) &#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">C1 | C2</span>
<span class="go">---------</span>
<span class="go">n1 | None</span>
<span class="go">n2 | None</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jsonpath(&#39;{&quot;d1&quot;:[{&quot;name&quot;:&quot;n1&quot;, &quot;value&quot;:&quot;v1&quot;}, {&quot;name&quot;:&quot;n2&quot;}]}&#39;, &#39;$.d1[*].name&#39;, &#39;$.d1[*].value&#39;) &#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">C1          | C2</span>
<span class="go">----------------</span>
<span class="go">[&quot;n1&quot;,&quot;n2&quot;] | v1</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jsonpath(&#39;{&quot;d1&quot;:[{&quot;name&quot;:&quot;n1&quot;, &quot;value&quot;:&quot;v1&quot;}, {&quot;name&quot;:&quot;n2&quot;, &quot;value&quot;:&quot;v2&quot;}]}&#39;, &#39;$.nonexisting&#39;) &#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt><strong>jsonstrict function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jsonstrict">
<code class="descname">jsonstrict</code><span class="sig-paren">(</span><em>args...</em><span class="sig-paren">)</span> &#x2192; json string<a class="headerlink" href="#functions.row.jpacks.jsonstrict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Sometimes we wish to process json lists from another application. Jsonstrict function
tries to always create json compatible lists. So it always returns json lists.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jsonstrict(&#39;a&#39;)&quot;</span><span class="p">)</span>
<span class="go">jsonstrict(&#39;a&#39;)</span>
<span class="go">---------------</span>
<span class="go">[&quot;a&quot;]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jsonstrict(&#39;a&#39;,&#39;b&#39;,3)&quot;</span><span class="p">)</span>
<span class="go">jsonstrict(&#39;a&#39;,&#39;b&#39;,3)</span>
<span class="go">---------------------</span>
<span class="go">[&quot;a&quot;,&quot;b&quot;,3]</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jsonstrict(&#39;a&#39;, jpack(&#39;b&#39;,3))&quot;</span><span class="p">)</span>
<span class="go">jsonstrict(&#39;a&#39;, jpack(&#39;b&#39;,3))</span>
<span class="go">-----------------------------</span>
<span class="go">[&quot;a&quot;,[&quot;b&quot;,3]]</span>
</pre></div>
</div>
</dd>
<dt><strong>jsort function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jsort">
<code class="descname">jsort</code><span class="sig-paren">(</span><em>jpacks</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.jsort" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Sorts the input jpacks.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jsort(&#39;[1,2,3]&#39;, &#39;[1,2,3]&#39;, &#39;b&#39;, &#39;a&#39;, 3 )&quot;</span><span class="p">)</span> 
<span class="go">jsort(&#39;[1,2,3]&#39;, &#39;[1,2,3]&#39;, &#39;b&#39;, &#39;a&#39;, 3 )</span>
<span class="go">-----------------------------------------</span>
<span class="go">[1,1,2,2,3,3,3,&quot;a&quot;,&quot;b&quot;]</span>
</pre></div>
</div>
</dd>
<dt><strong>jsplice function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jsplice">
<code class="descname">jsplice</code><span class="sig-paren">(</span><em>jpack</em>, <em>range1_start</em>, <em>range1_end</em>, <em>...</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.jsplice" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Splices input jpack. If only a single range argument is provided, it returns input jpack’s element in provided position. If defined position
index is positive, then it starts counting from the beginning of input jpack. If defined position is negative it starts counting from the
end of input jpack.</p>
<p>If more than one range arguments are provided, then the arguments are assumed to be provided in pairs (start, end) that define ranges inside
the input jpack that should be joined together in output jpack.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jsplice(&#39;[1,2,3,4,5]&#39;,0) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jsplice(&#39;[1,2,3,4,5]&#39;,0)</span>
<span class="go">------------------------</span>
<span class="go">1</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jsplice(&#39;[1,2,3,4,5]&#39;,-1) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jsplice(&#39;[1,2,3,4,5]&#39;,-1)</span>
<span class="go">-------------------------</span>
<span class="go">5</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jsplice(&#39;[1,2,3,4,5]&#39;,10) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jsplice(&#39;[1,2,3,4,5]&#39;,10)</span>
<span class="go">-------------------------</span>
<span class="go">None</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jsplice(&#39;[1,2,3,4,5]&#39;, 0, 3, 0, 2) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jsplice(&#39;[1,2,3,4,5]&#39;, 0, 3, 0, 2)</span>
<span class="go">----------------------------------</span>
<span class="go">[1,2,3,1,2]</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; select jsplice(&#39;[1,2,3,4,5]&#39;, 2, -1) &#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">jsplice(&#39;[1,2,3,4,5]&#39;, 2, -1)</span>
<span class="go">-----------------------------</span>
<span class="go">[3,4]</span>
</pre></div>
</div>
</dd>
<dt><strong>jsplit function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jsplit">
<code class="descname">jsplit</code><span class="sig-paren">(</span><em>jpacks</em><span class="sig-paren">)</span> &#x2192; [C1, C2, ...]<a class="headerlink" href="#functions.row.jpacks.jsplit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Splits horizontally a jpack.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jsplit(&#39;[1,2,3]&#39;, &#39;[3,4,5]&#39;)&quot;</span><span class="p">)</span> 
<span class="go">C1 | C2 | C3 | C4 | C5 | C6</span>
<span class="go">---------------------------</span>
<span class="go">1  | 2  | 3  | 3  | 4  | 5</span>
</pre></div>
</div>
</dd>
<dt><strong>jsplitv function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jsplitv">
<code class="descname">jsplitv</code><span class="sig-paren">(</span><em>jpacks</em><span class="sig-paren">)</span> &#x2192; [C1]<a class="headerlink" href="#functions.row.jpacks.jsplitv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Splits vertically a jpack.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select jsplitv(jmerge(&#39;[1,2,3]&#39;, &#39;[1,2,3]&#39;, &#39;b&#39;, &#39;a&#39;, 3 ))&quot;</span><span class="p">)</span> 
<span class="go">C1</span>
<span class="go">--</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">b</span>
<span class="go">a</span>
<span class="go">3</span>
</pre></div>
</div>
</dd>
<dt><strong>jzip function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jzip">
<code class="descname">jzip</code><span class="sig-paren">(</span><em>args...</em><span class="sig-paren">)</span> &#x2192; json string<a class="headerlink" href="#functions.row.jpacks.jzip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>It combines the corresponding elements of input jpacks.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jzip(&#39;[&quot;a&quot;, &quot;b&quot;]&#39;, &#39;[1,2]&#39;,&#39;[4,5]&#39;)&#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">jzip(&#39;[&quot;a&quot;, &quot;b&quot;]&#39;, &#39;[1,2]&#39;,&#39;[4,5]&#39;)</span>
<span class="go">-----------------------------------</span>
<span class="go">[[&quot;a&quot;,1,4],[&quot;b&quot;,2,5]]</span>
</pre></div>
</div>
</dd>
<dt><strong>jzipdict function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.jzipdict">
<code class="descname">jzipdict</code><span class="sig-paren">(</span><em>args...</em><span class="sig-paren">)</span> &#x2192; json string<a class="headerlink" href="#functions.row.jpacks.jzipdict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>It combines the correspinding elements of input jpacks into a jdict.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select jzipdict(&#39;[&quot;a&quot;, &quot;b&quot;]&#39;, &#39;[1,2]&#39;,&#39;[4,5]&#39;)&#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">jzipdict(&#39;[&quot;a&quot;, &quot;b&quot;]&#39;, &#39;[1,2]&#39;,&#39;[4,5]&#39;)</span>
<span class="go">---------------------------------------</span>
<span class="go">{&quot;a&quot;:[1,4],&quot;b&quot;:[2,5]}</span>
</pre></div>
</div>
</dd>
<dt><strong>nl2j function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.nl2j">
<code class="descname">nl2j</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.nl2j" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p class="last">Converts a text with newlines to a jpack.</p>
</dd>
<dt><strong>s2j function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.s2j">
<code class="descname">s2j</code><span class="sig-paren">(</span><em>tabpack</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.s2j" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Converts a space separated pack to a jpack.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select s2j(&#39;1  2 3 &#39;)&quot;</span><span class="p">)</span> 
<span class="go">s2j(&#39;1  2 3 &#39;)</span>
<span class="go">--------------</span>
<span class="go">[&quot;1&quot;,&quot;2&quot;,&quot;3&quot;]</span>
</pre></div>
</div>
</dd>
<dt><strong>t2j function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.jpacks.t2j">
<code class="descname">t2j</code><span class="sig-paren">(</span><em>tabpack</em><span class="sig-paren">)</span> &#x2192; jpack<a class="headerlink" href="#functions.row.jpacks.t2j" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Converts a tab separated pack to a jpack.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select t2j(j2t(&#39;[1,2,3]&#39;))&quot;</span><span class="p">)</span> 
<span class="go">t2j(j2t(&#39;[1,2,3]&#39;))</span>
<span class="go">-------------------</span>
<span class="go">[&quot;1&quot;,&quot;2&quot;,&quot;3&quot;]</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select t2j(&#39;asdfasdf&#39;)&quot;</span><span class="p">)</span> 
<span class="go">t2j(&#39;asdfasdf&#39;)</span>
<span class="go">---------------</span>
<span class="go">[&quot;asdfasdf&quot;]</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.langtools">
<span id="langtools-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">langtools</span></code> functions<a class="headerlink" href="#module-functions.row.langtools" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>detectlang function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.langtools.detectlang">
<code class="descname">detectlang</code><span class="sig-paren">(</span><em>text1</em>, <em>text2</em>, <em>...</em><span class="sig-paren">)</span> &#x2192; text<a class="headerlink" href="#functions.row.langtools.detectlang" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Detects the language of a snippet of text by analysing its statistical properties.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;detectlang &#39;ελληνικά&#39;&quot;</span><span class="p">)</span>
<span class="go">detectlang(&#39;ελληνικά&#39;)</span>
<span class="go">------------------------------</span>
<span class="go">greek-utf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;detectlang this is in english&quot;</span><span class="p">)</span>
<span class="go">detectlang(&#39;this is in english&#39;)</span>
<span class="go">--------------------------------</span>
<span class="go">english</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;detectlang ceci est en français&quot;</span><span class="p">)</span>
<span class="go">detectlang(&#39;ceci est en français&#39;)</span>
<span class="go">-----------------------------------</span>
<span class="go">french</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;detectlang este es el español&quot;</span><span class="p">)</span>
<span class="go">detectlang(&#39;este es el español&#39;)</span>
<span class="go">---------------------------------</span>
<span class="go">spanish</span>
</pre></div>
</div>
</dd>
<dt><strong>stem function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.langtools.stem">
<code class="descname">stem</code><span class="sig-paren">(</span><em>text1</em>, <em>text2</em>, <em>...</em><span class="sig-paren">)</span> &#x2192; text<a class="headerlink" href="#functions.row.langtools.stem" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Does stemming according to the porter algorithm.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;stem &#39;cutting and creating&#39;&quot;</span><span class="p">)</span>
<span class="go">stem(&#39;cutting and creating&#39;)</span>
<span class="go">----------------------------</span>
<span class="go">cut and creat</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;stem ceci est en français cutting&quot;</span><span class="p">)</span>
<span class="go">stem(&#39;ceci est en français cutting&#39;)</span>
<span class="go">-------------------------------------</span>
<span class="go">ceci est en françai cut</span>
</pre></div>
</div>
</dd>
<dt><strong>stem_en function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.langtools.stem_en">
<code class="descname">stem_en</code><span class="sig-paren">(</span><em>text1</em>, <em>text2</em>, <em>...</em><span class="sig-paren">)</span> &#x2192; text<a class="headerlink" href="#functions.row.langtools.stem_en" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Detects if the input is in english and only then does the porter stemming else
it returns the input arguments concatenated</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;stem_en &#39;cutting and creating&#39;&quot;</span><span class="p">)</span>
<span class="go">stem_en(&#39;cutting and creating&#39;)</span>
<span class="go">-------------------------------</span>
<span class="go">cut and creat</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;stem_en ceci est en français cutting&quot;</span><span class="p">)</span>
<span class="go">stem_en(&#39;ceci est en français cutting&#39;)</span>
<span class="go">----------------------------------------</span>
<span class="go">ceci est en français cutting</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.logparse">
<span id="logparse-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">logparse</span></code> functions<a class="headerlink" href="#module-functions.row.logparse" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>apachelogsplit function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.logparse.apachelogsplit">
<code class="descname">apachelogsplit</code><span class="sig-paren">(</span><em>apache_log_line</em><span class="sig-paren">)</span> &#x2192; [ip, ident, authuser, date, request, status, bytes, referrer, useragent]<a class="headerlink" href="#functions.row.logparse.apachelogsplit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Breaks a single apache log row into multiple fields.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">&#39;1.1.1.1 - - [01/Feb/2001:01:02:03 +0001] &quot;HEAD /test.com HTTP/1.1&quot; 200 - &quot;-&quot; &quot;reftest&quot;&#39;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select apachelogsplit(a) from table1&quot;</span><span class="p">)</span>
<span class="go">ip      | ident | authuser | date                     | method | uri       | httpver | status | bytes | referrer | useragent</span>
<span class="go">----------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">1.1.1.1 | None  | None     | 2001-02-01T01:02:03+0001 | HEAD   | /test.com | 1.1     | 200    | None  | None     | reftest</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.mathops">
<span id="mathops-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">mathops</span></code> functions<a class="headerlink" href="#module-functions.row.mathops" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>farith function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.mathops.farith">
<code class="descname">farith</code><span class="sig-paren">(</span><em>calc</em><span class="sig-paren">)</span> &#x2192; float or Fraction<a class="headerlink" href="#functions.row.mathops.farith" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Takes as input a mathematical expression in polish notation and computes the result using fractional computation</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select farith(&#39;+&#39;,5,7)&quot;</span> <span class="p">)</span>
<span class="go">farith(&#39;+&#39;,5,7)</span>
<span class="go">---------------</span>
<span class="go">12</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select farith(&#39;-&#39;,&#39;*&#39;,&#39;/&#39;,15,&#39;-&#39;,7,&#39;+&#39;,1,1,3,&#39;+&#39;,2,&#39;+&#39;,1,1)&quot;</span> <span class="p">)</span>
<span class="go">farith(&#39;-&#39;,&#39;*&#39;,&#39;/&#39;,15,&#39;-&#39;,7,&#39;+&#39;,1,1,3,&#39;+&#39;,2,&#39;+&#39;,1,1)</span>
<span class="go">----------------------------------------------------</span>
<span class="go">5</span>
</pre></div>
</div>
</dd>
<dt><strong>gaussdistribution function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.mathops.gaussdistribution">
<code class="descname">gaussdistribution</code><span class="sig-paren">(</span><em>mean</em>, <em>sigma</em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#functions.row.mathops.gaussdistribution" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns a gaussian distribution. Sigma is the standard deviation of the
distribution</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select gaussdistribution(10,5)&quot;</span><span class="p">)</span> 
<span class="go">gaussdistribution(10,5)</span>
<span class="go">-----------------------</span>
<span class="gp">...</span>
</pre></div>
</div>
</dd>
<dt><strong>randomrange function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.mathops.randomrange">
<code class="descname">randomrange</code><span class="sig-paren">(</span><em>start</em>, <em>end</em>, <em>step</em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#functions.row.mathops.randomrange" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns a random number in the defined range</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select randomrange(0, 68, 1)&quot;</span><span class="p">)</span> 
<span class="go">randomrange(0, 68, 1)</span>
<span class="go">---------------------</span>
<span class="gp">...</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select randomrange(0, 68)&quot;</span><span class="p">)</span> 
<span class="go">randomrange(0, 68)</span>
<span class="go">------------------</span>
<span class="gp">...</span>
</pre></div>
</div>
</dd>
<dt><strong>safediv function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.mathops.safediv">
<code class="descname">safediv</code><span class="sig-paren">(</span><em>int</em>, <em>int</em>, <em>int</em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#functions.row.mathops.safediv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the first argument, when the division of the two subsequent numbers
includes zero in denominator (i.e. in third argument)</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select safeDiv(1,5,0)&quot;</span><span class="p">)</span>
<span class="go">safeDiv(1,5,0)</span>
<span class="go">--------------</span>
<span class="go">1</span>
</pre></div>
</div>
</dd>
<dt><strong>sqroot function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.mathops.sqroot">
<code class="descname">sqroot</code><span class="sig-paren">(</span><em>int</em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#functions.row.mathops.sqroot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the square root of a given argument.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">25</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select sqroot(a) from table1&quot;</span><span class="p">)</span>
<span class="go">sqroot(a)</span>
<span class="go">---------</span>
<span class="go">5.0</span>
</pre></div>
</div>
</dd>
<dt><strong>tonumber function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.mathops.tonumber">
<code class="descname">tonumber</code><span class="sig-paren">(</span><em>variable</em><span class="sig-paren">)</span> &#x2192; int or float<a class="headerlink" href="#functions.row.mathops.tonumber" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Convert variable, whose type is str or unicode, to int or float, if it is feasible</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select tonumber(&#39;12.3&#39;) as val&quot;</span><span class="p">)</span>
<span class="go">val</span>
<span class="go">----</span>
<span class="go">12.3</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select tonumber(12.3) as val&quot;</span><span class="p">)</span>
<span class="go">val</span>
<span class="go">----</span>
<span class="go">12.3</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select tonumber(&#39;not a number&#39;) as val&quot;</span><span class="p">)</span>
<span class="go">val</span>
<span class="go">------------</span>
<span class="go">not a number</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select tonumber(null) as val&quot;</span><span class="p">)</span>
<span class="go">val</span>
<span class="go">----</span>
<span class="go">None</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.settings">
<span id="settings-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">settings</span></code> functions<a class="headerlink" href="#module-functions.row.settings" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>setlog function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.settings.setlog">
<code class="descname">setlog</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.settings.setlog" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p class="last">Sets the log file path/filename for exec operator</p>
</dd>
<dt><strong>setting function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.settings.setting">
<code class="descname">setting</code><span class="sig-paren">(</span><em>setting_name</em><span class="optional">[</span>, <em>value</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.settings.setting" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Sets and returns a setting’s value</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;setting &#39;tracing&#39; 0&quot;</span><span class="p">)</span>
<span class="go">setting(&#39;tracing&#39;,&#39;0&#39;)</span>
<span class="go">----------------------</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;setting &#39;tracing&#39;&quot;</span><span class="p">)</span>
<span class="go">setting(&#39;tracing&#39;)</span>
<span class="go">------------------</span>
<span class="go">False</span>
</pre></div>
</div>
</dd>
<dt><strong>toggle function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.settings.toggle">
<code class="descname">toggle</code><span class="sig-paren">(</span><em>setting_name</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.settings.toggle" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Toggles a boolean global setting</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;toggle lala&quot;</span><span class="p">)</span>
<span class="go">toggle(&#39;lala&#39;)</span>
<span class="go">--------------</span>
<span class="go">lala not found</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;toggle tracing&quot;</span><span class="p">)</span>
<span class="go">toggle(&#39;tracing&#39;)</span>
<span class="go">--------------------</span>
<span class="go">tracing is now: True</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.similarity">
<span id="similarity-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">similarity</span></code> functions<a class="headerlink" href="#module-functions.row.similarity" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>jaccard function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.similarity.jaccard">
<code class="descname">jaccard</code><span class="sig-paren">(</span><em>jpack1</em>, <em>jpack2</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.similarity.jaccard" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Return jaccard similarity value of two jpacks.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">user1   movie1 20</span>
<span class="gp">... </span><span class="s1">user1   movie2 30</span>
<span class="gp">... </span><span class="s1">user2   movie1 40</span>
<span class="gp">... </span><span class="s1">user2   movie3 90</span>
<span class="gp">... </span><span class="s1">user2   movie4 90</span>
<span class="gp">... </span><span class="s1">user3   movie1 40</span>
<span class="gp">... </span><span class="s1">user3   movie3 80</span>
<span class="gp">... </span><span class="s1">user4   movie1 70</span>
<span class="gp">... </span><span class="s1">user4   movie2 10</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>NOTE that only column b is jgrouped because <em>jaccard</em> operates on packs as sets, not weighted values, So packing
also column c would not make any difference.</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;select u1.userid,u2.userid, jaccard(u1.pk, u2.pk) as similarity</span>
<span class="gp">... </span><span class="s2">    from</span>
<span class="gp">... </span><span class="s2">        (select a as userid, jgroup(b)  as pk from table1 group by a) as u1,</span>
<span class="gp">... </span><span class="s2">        (select a as userid, jgroup(b) as pk from table1 group by a) as u2</span>
<span class="gp">... </span><span class="s2">    where u1.userid&lt;u2.userid&quot;&quot;&quot;</span><span class="p">)</span>
<span class="go">userid | userid | similarity</span>
<span class="go">--------------------------------</span>
<span class="go">user1  | user2  | 0.25</span>
<span class="go">user1  | user3  | 0.333333333333</span>
<span class="go">user1  | user4  | 1.0</span>
<span class="go">user2  | user3  | 0.666666666667</span>
<span class="go">user2  | user4  | 0.25</span>
<span class="go">user3  | user4  | 0.333333333333</span>
</pre></div>
</div>
</dd>
<dt><strong>sorensendice function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.similarity.sorensendice">
<code class="descname">sorensendice</code><span class="sig-paren">(</span><em>jpack1</em>, <em>jpack2</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.similarity.sorensendice" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Return jaccard similarity value of two jpacks.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">user1   movie1 20</span>
<span class="gp">... </span><span class="s1">user1   movie2 30</span>
<span class="gp">... </span><span class="s1">user2   movie1 40</span>
<span class="gp">... </span><span class="s1">user2   movie3 90</span>
<span class="gp">... </span><span class="s1">user2   movie4 90</span>
<span class="gp">... </span><span class="s1">user3   movie1 40</span>
<span class="gp">... </span><span class="s1">user3   movie3 80</span>
<span class="gp">... </span><span class="s1">user4   movie1 70</span>
<span class="gp">... </span><span class="s1">user4   movie2 10</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>NOTE that only column b is jgrouped because <em>jaccard</em> operates on packs as sets, not weighted values, So packing
also column c would not make any difference.</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;select u1.userid,u2.userid, sorensendice(u1.pk, u2.pk) as similarity</span>
<span class="gp">... </span><span class="s2">    from</span>
<span class="gp">... </span><span class="s2">        (select a as userid, jgroup(b)  as pk from table1 group by a) as u1,</span>
<span class="gp">... </span><span class="s2">        (select a as userid, jgroup(b) as pk from table1 group by a) as u2</span>
<span class="gp">... </span><span class="s2">    where u1.userid&lt;u2.userid&quot;&quot;&quot;</span><span class="p">)</span>
<span class="go">userid | userid | similarity</span>
<span class="go">----------------------------</span>
<span class="go">user1  | user2  | 0.4</span>
<span class="go">user1  | user3  | 0.5</span>
<span class="go">user1  | user4  | 1.0</span>
<span class="go">user2  | user3  | 0.8</span>
<span class="go">user2  | user4  | 0.4</span>
<span class="go">user3  | user4  | 0.5</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.stopwords">
<span id="stopwords-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">stopwords</span></code> functions<a class="headerlink" href="#module-functions.row.stopwords" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>filterstopwords function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.stopwords.filterstopwords">
<code class="descname">filterstopwords</code><span class="sig-paren">(</span><em>str</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#functions.row.stopwords.filterstopwords" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the input text with the stopwords removed. The case of the first letter matters.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">&#39;this and wood&#39;         &#39;NO more No words&#39;</span>
<span class="gp">... </span><span class="s1">&#39;No more stop words&#39;    &#39;more free time&#39;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select filterstopwords(a,b) from table1&quot;</span><span class="p">)</span>
<span class="go">filterstopwords(a,b)</span>
<span class="go">--------------------</span>
<span class="go">wood NO words</span>
<span class="go">stop words free time</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.stringdist">
<span id="stringdist-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">stringdist</span></code> functions<a class="headerlink" href="#module-functions.row.stringdist" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>damlevendist function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.stringdist.damlevendist">
<code class="descname">damlevendist</code><span class="sig-paren">(</span><em>str1</em>, <em>str2</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.stringdist.damlevendist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns <em>int</em> which is the damerau-levenshtein distance between str1 and str2</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select damlevendist(&#39;HURQBOHP&#39;,&#39;QKHOZ&#39;) &quot;</span><span class="p">)</span>
<span class="go">damlevendist(&#39;HURQBOHP&#39;,&#39;QKHOZ&#39;)</span>
<span class="go">--------------------------------</span>
<span class="go">6</span>
</pre></div>
</div>
</dd>
<dt><strong>levendist function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.stringdist.levendist">
<code class="descname">levendist</code><span class="sig-paren">(</span><em>str1</em>, <em>str2</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.stringdist.levendist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns <em>int</em> which is the levenshtein distance between str1 and str2</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select levendist(&#39;HURQBOHP&#39;,&#39;QKHOZ&#39;) &quot;</span><span class="p">)</span>
<span class="go">levendist(&#39;HURQBOHP&#39;,&#39;QKHOZ&#39;)</span>
<span class="go">-----------------------------</span>
<span class="go">7</span>
</pre></div>
</div>
</dd>
<dt><strong>quickstrdist function</strong></dt>
<dd><dl class="first function">
<dt>
<code class="descname">damlevendist</code><span class="sig-paren">(</span><em>str1</em>, <em>str2</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<p>Returns <em>int</em> which is a string distance between str1 and str2, based on Python’s
difflib library. It is a lot faster than levendist or damlevendist.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select quickstrdist(&#39;HURQBOHP&#39;,&#39;QKHOZ&#39;) &quot;</span><span class="p">)</span>
<span class="go">quickstrdist(&#39;HURQBOHP&#39;,&#39;QKHOZ&#39;)</span>
<span class="go">--------------------------------</span>
<span class="go">8</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.termsetops">
<span id="termsetops-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">termsetops</span></code> functions<a class="headerlink" href="#module-functions.row.termsetops" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>tset function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.termsetops.termsetdiff">
<code class="descname">termsetdiff</code><span class="sig-paren">(</span><em>termset1</em>, <em>termset2</em><span class="sig-paren">)</span> &#x2192; termset<a class="headerlink" href="#functions.row.termsetops.termsetdiff" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the termset that is the difference of sets of termset1 - termset2.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">&#39;t1 t2 t3&#39; &#39;t2 t3&#39;</span>
<span class="gp">... </span><span class="s1">&#39;t3 t2 t1&#39; &#39;t3 t4&#39;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select tset(a,b) from table1&quot;</span><span class="p">)</span>
<span class="go">tset(a,b)</span>
<span class="go">-----------</span>
<span class="go">t1 t2 t3</span>
<span class="go">t1 t2 t3 t4</span>
</pre></div>
</div>
</dd>
<dt><strong>tsetcombinations function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.termsetops.tsetcombinations">
<code class="descname">tsetcombinations</code><span class="sig-paren">(</span><em>termset</em>, <em>r</em><span class="sig-paren">)</span> &#x2192; termset<a class="headerlink" href="#functions.row.termsetops.tsetcombinations" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns all the termset combinations of length r.
It is a multiset operator that returns one column but many rows.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="manual.html#tutmultiset"><span class="std std-ref">Multisets</span></a> functions</li>
</ul>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select tsetcombinations(&#39;t1 t2 t3 t4&#39;,2)&quot;</span><span class="p">)</span>
<span class="go">C1</span>
<span class="go">-----</span>
<span class="go">t1 t2</span>
<span class="go">t1 t3</span>
<span class="go">t1 t4</span>
<span class="go">t2 t3</span>
<span class="go">t2 t4</span>
<span class="go">t3 t4</span>
</pre></div>
</div>
</dd>
<dt><strong>tsetdiff function</strong></dt>
<dd><dl class="first function">
<dt>
<code class="descname">termsetdiff</code><span class="sig-paren">(</span><em>termset1</em>, <em>termset2</em><span class="sig-paren">)</span> &#x2192; termset</dt>
<dd></dd></dl>

<p>Returns the termset that is the difference of sets of termset1 - termset2.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">&#39;t1 t2 t3&#39; &#39;t2 t3&#39;</span>
<span class="gp">... </span><span class="s1">&#39;t3 t2 t1&#39; &#39;t3 t4&#39;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select tsetdiff(a,b) from table1&quot;</span><span class="p">)</span>
<span class="go">tsetdiff(a,b)</span>
<span class="go">-------------</span>
<span class="go">t1</span>
<span class="go">t1 t2</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.text">
<span id="text-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">text</span></code> functions<a class="headerlink" href="#module-functions.row.text" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>comprspaces function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.comprspaces">
<code class="descname">comprspaces</code><span class="sig-paren">(</span><em>text1</em><span class="optional">[</span>, <em>text2</em>, <em>...</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; text<a class="headerlink" href="#functions.row.text.comprspaces" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>This function strips (from the beginning and the end) and compresses
the spaces in its input.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">&#39;   an example    with spaces      &#39;    &#39;another    example with spaces         &#39;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select comprspaces(a,b) from table1&quot;</span><span class="p">)</span>
<span class="go">comprspaces(a,b)</span>
<span class="go">--------------------------------------------------</span>
<span class="go">an example with spaces another example with spaces</span>
</pre></div>
</div>
</dd>
<dt><strong>contains function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.contains">
<code class="descname">contains</code><span class="sig-paren">(</span><em>str1</em>, <em>str2</em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#functions.row.text.contains" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns true if string <em>str1</em> contains <em>str2</em>.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select contains(&#39;test string&#39;, &#39;str&#39;) as test  &quot;</span><span class="p">)</span>
<span class="go">test</span>
<span class="go">----</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select contains(&#39;test string&#39;, &#39;nostr&#39;) as test  &quot;</span><span class="p">)</span>
<span class="go">test</span>
<span class="go">----</span>
<span class="go">0</span>
</pre></div>
</div>
</dd>
<dt><strong>cqlfields function</strong></dt>
<dd><p class="first">This functions returns the keywords inside a single column or aggregated
from multiple columns. It plays well with Unicode.</p>
<p>The difference of cqlkeywords to keywords is that cqlkeywords also
strips cql syntax like “title all” or “author all”.</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">&#39;(title all &quot;scrieri&quot;) and (creator all &quot;arghezi&quot;) and (title all &quot;other&quot;)&#39;</span>
<span class="gp">... </span><span class="s1">&#39;(&quot;maschinenschreiben&quot;) and (language all &quot;ger&quot;)&#39;</span>
<span class="gp">... </span><span class="s1">&#39;(&quot;sauer&quot;) and (&quot;übungsbuch&quot;)&#39;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select cqlfields(a) from table1&quot;</span><span class="p">)</span>
<span class="go">cqlfields(a)</span>
<span class="go">-------------------</span>
<span class="go">title creator title</span>
<span class="go">language</span>
</pre></div>
</div>
</dd>
<dt><strong>cqlkeywords function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.cqlkeywords">
<code class="descname">cqlkeywords</code><span class="sig-paren">(</span><em>text1</em><span class="optional">[</span>, <em>text2</em>, <em>...</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; text<a class="headerlink" href="#functions.row.text.cqlkeywords" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the keywords inside a single column (text1) or aggregated
from multiple columns.</p>
<p>The difference of cqlkeywords to keywords is that cqlkeywords also
strips cql syntax like “title all” or “author all” and plain cql directives
like ‘creator’, ‘title’…</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">first(second)   third+fourth</span>
<span class="gp">... </span><span class="s1">πρωτο(δευτερο)  τριτο_τέταρτο</span>
<span class="gp">... </span><span class="s1">&#39;πέμπτο all&#39;      &#39;έκτο title all τεστ&#39;</span>
<span class="gp">... </span><span class="s1">&#39;title all and something&#39; &#39;other&#39;</span>
<span class="gp">... </span><span class="s1">&#39;title and something&#39; &#39;other&#39;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select cqlkeywords(a,b) from table1&quot;</span><span class="p">)</span>
<span class="go">cqlkeywords(a,b)</span>
<span class="go">---------------------------------------------------</span>
<span class="go">first second third fourth</span>
<span class="go">πρωτο δευτερο τριτο_τέταρτο</span>
<span class="go">έκτο τεστ</span>
<span class="go">something other</span>
<span class="go">and something other</span>
</pre></div>
</div>
</dd>
<dt><strong>crc32 function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.crc32">
<code class="descname">crc32</code><span class="sig-paren">(</span><em>args</em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#functions.row.text.crc32" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the CRC32 of args. Numbers are converted to text before hashing is
performed.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select crc32(65)&quot;</span><span class="p">)</span>
<span class="go">crc32(65)</span>
<span class="go">----------</span>
<span class="go">2658551721</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select crc32(6,5)&quot;</span><span class="p">)</span>
<span class="go">crc32(6,5)</span>
<span class="go">----------</span>
<span class="go">1565899724</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select crc32(5)&quot;</span><span class="p">)</span>
<span class="go">crc32(5)</span>
<span class="go">----------</span>
<span class="go">2226203566</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select crc32(&#39;5&#39;)&quot;</span><span class="p">)</span>
<span class="go">crc32(&#39;5&#39;)</span>
<span class="go">----------</span>
<span class="go">1201448970</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>escapechars function</strong></p>
<dl class="docutils">
<dt><strong>hashmd5 function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.hashmd5">
<code class="descname">hashmd5</code><span class="sig-paren">(</span><em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.text.hashmd5" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns an MD5 hash of args. Numbers are converted to text before hashing is
performed.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select hashmd5(65)&quot;</span><span class="p">)</span>
<span class="go">hashmd5(65)</span>
<span class="go">--------------------------------</span>
<span class="go">fc490ca45c00b1249bbe3554a4fdf6fb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select hashmd5(6,5)&quot;</span><span class="p">)</span>
<span class="go">hashmd5(6,5)</span>
<span class="go">--------------------------------</span>
<span class="go">f0d95c20cde50e3ca03cab53f986b6c3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select hashmd5(5)&quot;</span><span class="p">)</span>
<span class="go">hashmd5(5)</span>
<span class="go">--------------------------------</span>
<span class="go">e4da3b7fbbce2345d7772b0674a318d5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select hashmd5(&#39;5&#39;)&quot;</span><span class="p">)</span>
<span class="go">hashmd5(&#39;5&#39;)</span>
<span class="go">--------------------------------</span>
<span class="go">7000aaf68ca7a93da0af3d03850571c2</span>
</pre></div>
</div>
</dd>
<dt><strong>hashmd5mod function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.hashmd5mod">
<code class="descname">hashmd5mod</code><span class="sig-paren">(</span><em>args</em>, <em>divisor</em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#functions.row.text.hashmd5mod" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the <em>modulo</em> with divisor number of the MD5 hash of args.
Numbers are converted to text before hashing is performed.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select hashmd5mod(65, 3)&quot;</span><span class="p">)</span>
<span class="go">hashmd5mod(65, 3)</span>
<span class="go">-----------------</span>
<span class="go">0</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select hashmd5mod(6,5, 4)&quot;</span><span class="p">)</span>
<span class="go">hashmd5mod(6,5, 4)</span>
<span class="go">------------------</span>
<span class="go">2</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select hashmd5mod(5, 5)&quot;</span><span class="p">)</span>
<span class="go">hashmd5mod(5, 5)</span>
<span class="go">----------------</span>
<span class="go">3</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select hashmd5mod(&#39;5&#39;, 5)&quot;</span><span class="p">)</span>
<span class="go">hashmd5mod(&#39;5&#39;, 5)</span>
<span class="go">------------------</span>
<span class="go">4</span>
</pre></div>
</div>
</dd>
<dt><strong>hashmodarchdep function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.hashmodarchdep">
<code class="descname">hashmodarchdep</code><span class="sig-paren">(</span><em>args</em>, <em>divisor</em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#functions.row.text.hashmodarchdep" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns a hash of the args.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This hash function is architecture dependent (32bit vs 64bit).</p>
</div>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select hashmodarchdep(65,5)&quot;</span><span class="p">)</span> 
<span class="go">hashmodarchdep(65,5)</span>
<span class="go">--------------------</span>
<span class="gp">...</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select hashmodarchdep(6,5)&quot;</span><span class="p">)</span> 
<span class="go">hashmodarchdep(6,5)</span>
<span class="go">-------------------</span>
<span class="gp">...</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select hashmodarchdep(5,5)&quot;</span><span class="p">)</span> 
<span class="go">hashmodarchdep(5,5)</span>
<span class="go">-------------------</span>
<span class="gp">...</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select hashmodarchdep(&#39;5&#39;,5)&quot;</span><span class="p">)</span> 
<span class="go">hashmodarchdep(&#39;5&#39;,5)</span>
<span class="go">---------------------</span>
<span class="gp">...</span>
</pre></div>
</div>
</dd>
<dt><strong>hashmodarchdep2 function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.hashmodarchdep2">
<code class="descname">hashmodarchdep2</code><span class="sig-paren">(</span><em>arg</em>, <em>divisor</em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#functions.row.text.hashmodarchdep2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns a hash of the args.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This hash function is architecture dependent (32bit vs 64bit). It is specialized for 2 parameters</p>
</div>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select hashmodarchdep2(65,5)&quot;</span><span class="p">)</span> 
<span class="go">hashmodarchdep2(65,5)</span>
<span class="go">---------------------</span>
<span class="gp">...</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select hashmodarchdep2(6,5)&quot;</span><span class="p">)</span> 
<span class="go">hashmodarchdep2(6,5)</span>
<span class="go">--------------------</span>
<span class="gp">...</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select hashmodarchdep2(5,5)&quot;</span><span class="p">)</span> 
<span class="go">hashmodarchdep2(5,5)</span>
<span class="go">--------------------</span>
<span class="gp">...</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select hashmodarchdep2(&#39;5&#39;,5)&quot;</span><span class="p">)</span> 
<span class="go">hashmodarchdep2(&#39;5&#39;,5)</span>
<span class="go">----------------------</span>
<span class="gp">...</span>
</pre></div>
</div>
</dd>
<dt><strong>isvalidutf8 function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.isvalidutf8">
<code class="descname">isvalidutf8</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span> &#x2192; 1/0<a class="headerlink" href="#functions.row.text.isvalidutf8" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns 1 if the input text is in valid UTF-8 format, or 0 if not.
This function is used to find corrupted UTF-8 strings with a heuristic
based on non common characters.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">test</span>
<span class="gp">... </span><span class="s1">δοκιμή!</span>
<span class="gp">... </span><span class="s1">sÃ©vignÃ</span>
<span class="gp">... </span><span class="s1">Ã©vezred</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select isvalidutf8(a) from table1&quot;</span><span class="p">)</span>
<span class="go">isvalidutf8(a)</span>
<span class="go">--------------</span>
<span class="go">1</span>
<span class="go">1</span>
<span class="go">1</span>
<span class="go">1</span>
</pre></div>
</div>
</dd>
<dt><strong>keywords function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.keywords">
<code class="descname">keywords</code><span class="sig-paren">(</span><em>text1</em><span class="optional">[</span>, <em>text2</em>, <em>...</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; text<a class="headerlink" href="#functions.row.text.keywords" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the keywords inside a single column (text1) or aggregated
multiple columns.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">first(second)   third+fourth</span>
<span class="gp">... </span><span class="s1">πρωτο(δευτερο)  τριτο+τέταρτο</span>
<span class="gp">... </span><span class="s1">&#39;πέμπτο all&#39;      &#39;qwer.zxcv&#39;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select keywords(a,b) from table1&quot;</span><span class="p">)</span>
<span class="go">keywords(a,b)</span>
<span class="go">---------------------------------------------------</span>
<span class="go">first second third fourth</span>
<span class="go">πρωτο δευτερο τριτο τέταρτο</span>
<span class="go">πέμπτο all qwer zxcv</span>
</pre></div>
</div>
</dd>
<dt><strong>kwnum function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.kwnum">
<code class="descname">kwnum</code><span class="sig-paren">(</span><em>text1</em><span class="optional">[</span>, <em>text2</em>, <em>...</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#functions.row.text.kwnum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the number of simple keywords in a string.
Its input should be words separated by spaces, as returned by
cqlkeywords or keywords.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">&#39;word1 word2 word3&#39;</span>
<span class="gp">... </span><span class="s1">&#39;word1 word2&#39;</span>
<span class="gp">... </span><span class="s1">&#39;word&#39;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select kwnum(a) from table1&quot;</span><span class="p">)</span>
<span class="go">kwnum(a)</span>
<span class="go">--------</span>
<span class="go">3</span>
<span class="go">2</span>
<span class="go">1</span>
</pre></div>
</div>
</dd>
<dt><strong>normalizetext function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.normalizetext">
<code class="descname">normalizetext</code><span class="sig-paren">(</span><em>text1</em><span class="optional">[</span>, <em>text2</em>, <em>...</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; text<a class="headerlink" href="#functions.row.text.normalizetext" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p class="last">Normalizes a text by replacing all the non-words except s</p>
</dd>
</dl>
<p>,.; with ‘_’</p>
<blockquote>
<div><p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">first(second)   third+fourth</span>
<span class="gp">... </span><span class="s1">πρωτο(δευτερο)  τριτο+τέταρτο</span>
<span class="gp">... </span><span class="s1">&#39;πέμπτο all&#39;      &#39;έκτο title all τεστ&#39;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select normalizetext(a,b) from table1&quot;</span><span class="p">)</span>
<span class="go">normalizetext(a,b)</span>
<span class="go">----------------------------------------------------</span>
<span class="go">first_second_ third_fourth</span>
<span class="go">πρωτο_δευτερο_ τριτο_τέταρτο</span>
<span class="go">πέμπτο all έκτο title all τεστ</span>
</pre></div>
</div>
</div></blockquote>
<dl class="docutils">
<dt><strong>normuni function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.normuni">
<code class="descname">normuni</code><span class="sig-paren">(</span><em>str</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.text.normuni" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns <em>str</em> normalised in the composed unicode normal form without replacing
same look characters. For example this ‘À’ character can be encoded with one or two
different characters, <a class="reference internal" href="#functions.row.text.normuni" title="functions.row.text.normuni"><code class="xref py py-func docutils literal"><span class="pre">normuni()</span></code></a> returns an one-character encoded version. This
function is important to check true strings equality.</p>
<p>Functions <a class="reference internal" href="#functions.row.text.sunitouni" title="functions.row.text.sunitouni"><code class="xref py py-func docutils literal"><span class="pre">sunitouni()</span></code></a> and <a class="reference internal" href="#functions.row.text.unitosuni" title="functions.row.text.unitosuni"><code class="xref py py-func docutils literal"><span class="pre">unitosuni()</span></code></a> are used in the examples to make it more comprehensive.</p>
<p>Examples:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Returned results in the next two examples should look the same,
if not that is a bug at the combined characters rendering of the shell
that the documentation was created.</p>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select sunitouni(&#39;C</span><span class="se">\u0327</span><span class="s2">&#39;) as test  &quot;</span><span class="p">)</span>
<span class="go">test</span>
<span class="go">----</span>
<span class="go">Ç</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select normuni(sunitouni(&#39;C</span><span class="se">\u0327</span><span class="s2">&#39;)) as test  &quot;</span><span class="p">)</span>
<span class="go">test</span>
<span class="go">----</span>
<span class="go">Ç</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select unitosuni(normuni(sunitouni(&#39;C</span><span class="se">\u0327</span><span class="s2">&#39;))) as test  &quot;</span><span class="p">)</span>
<span class="go">test</span>
<span class="go">------</span>
<span class="go">\u00c7</span>
</pre></div>
</div>
</dd>
<dt><strong>regexpcountuniquematches function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.regexpcountuniquematches">
<code class="descname">regexpcountuniquematches</code><span class="sig-paren">(</span><em>pattern</em>, <em>expression</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.text.regexpcountuniquematches" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of matches of pattern in expression.</p>
</dd></dl>

<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;regexpcountuniquematches &#39;start&#39; &#39;start end start&#39;  &quot;</span><span class="p">)</span>
<span class="go">regexpcountuniquematches(&#39;start&#39;,&#39;start end start&#39;)</span>
<span class="go">---------------------------------------------------</span>
<span class="go">1</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;regexpcountuniquematches &#39;start end&#39; &#39;start end start&#39;  &quot;</span><span class="p">)</span>
<span class="go">regexpcountuniquematches(&#39;start end&#39;,&#39;start end start&#39;)</span>
<span class="go">-------------------------------------------------------</span>
<span class="go">1</span>
</pre></div>
</div>
</dd>
<dt><strong>regexpcountwithpositions function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.regexpcountwithpositions">
<code class="descname">regexpcountwithpositions</code><span class="sig-paren">(</span><em>pattern</em>, <em>expression</em>, <em>start = 0</em>, <em>min = 0.5</em>, <em>multiply = 1</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.text.regexpcountwithpositions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a score of positioned matches of pattern in expression.</p>
</dd></dl>

<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;regexpcountwithpositions &#39;start&#39; &#39;start end start&#39;  &quot;</span><span class="p">)</span>
<span class="go">regexpcountwithpositions(&#39;start&#39;,&#39;start end start&#39;)</span>
<span class="go">---------------------------------------------------</span>
<span class="go">1.75</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;regexpcountwithpositions &#39;start&#39; &#39;start end start&#39;  &quot;</span><span class="p">)</span>
<span class="go">regexpcountwithpositions(&#39;start&#39;,&#39;start end start&#39;)</span>
<span class="go">---------------------------------------------------</span>
<span class="go">1.75</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;regexpcountwithpositions &#39;first&#39; &#39;first second third fourth&#39;&quot;</span><span class="p">)</span>
<span class="go">regexpcountwithpositions(&#39;first&#39;,&#39;first second third fourth&#39;)</span>
<span class="go">-------------------------------------------------------------</span>
<span class="go">0.75</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;regexpcountwithpositions &#39;fourth&#39; &#39;first second third fourth&#39;&quot;</span><span class="p">)</span>
<span class="go">regexpcountwithpositions(&#39;fourth&#39;,&#39;first second third fourth&#39;)</span>
<span class="go">--------------------------------------------------------------</span>
<span class="go">1.5</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;regexpcountwithpositions &#39;fourth&#39; &#39;first second third fourth&#39; 1&quot;</span><span class="p">)</span>
<span class="go">regexpcountwithpositions(&#39;fourth&#39;,&#39;first second third fourth&#39;,&#39;1&#39;)</span>
<span class="go">------------------------------------------------------------------</span>
<span class="go">0.5</span>
</pre></div>
</div>
</dd>
<dt><strong>regexpcountwords function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.regexpcountwords">
<code class="descname">regexpcountwords</code><span class="sig-paren">(</span><em>pattern</em>, <em>expression</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.text.regexpcountwords" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of matches of pattern in expression. If a match includes more than one words then it returns the number of the words.</p>
</dd></dl>

<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;regexpcountwords &#39;start&#39; &#39;start end start&#39;  &quot;</span><span class="p">)</span>
<span class="go">regexpcountwords(&#39;start&#39;,&#39;start end start&#39;)</span>
<span class="go">-------------------------------------------</span>
<span class="go">2</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;regexpcountwords &#39;start end&#39; &#39;start end start&#39;  &quot;</span><span class="p">)</span>
<span class="go">regexpcountwords(&#39;start end&#39;,&#39;start end start&#39;)</span>
<span class="go">-----------------------------------------------</span>
<span class="go">2</span>
</pre></div>
</div>
</dd>
<dt><strong>regexpr function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.regexp">
<code class="descname">regexp</code><span class="sig-paren">(</span><em>pattern</em>, <em>expression</em><span class="optional">[</span>, <em>replacestr</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.text.regexp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>This function returns a match to the first parenthesis of <em>pattern</em>
or replaces the matches of <em>pattern</em> in <em>expression</em> with <em>replacestr</em>.
<a class="reference external" href="http://docs.python.org/library/re.html#re-syntax">Pattern Syntax</a> is
according to python’s re module.</p>
<p>Examples use <cite>inversion</cite>.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">25</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;regexpr &#39;start\s(\w+)\send&#39; &#39;start otherword end&#39;  &quot;</span><span class="p">)</span>
<span class="go">regexpr(&#39;start\s(\w+)\send&#39;,&#39;start otherword end&#39;)</span>
<span class="go">--------------------------------------------------</span>
<span class="go">otherword</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;regexpr &#39;\W+&#39; &#39;@#$%@$#% tobereplaced @#$%@#$%&#39; &#39;nonword&#39;  &quot;</span><span class="p">)</span>
<span class="go">regexpr(&#39;\W+&#39;,&#39;@#$%@$#% tobereplaced @#$%@#$%&#39;,&#39;nonword&#39;)</span>
<span class="go">---------------------------------------------------------</span>
<span class="go">nonwordtobereplacednonword</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select regexpr(&#39;(\w+).*?(\w+)&#39;, &#39;one two three&#39;)&quot;</span><span class="p">)</span>
<span class="go">regexpr(&#39;(\w+).*?(\w+)&#39;, &#39;one two three&#39;)</span>
<span class="go">-----------------------------------------</span>
<span class="go">[&quot;one&quot;,&quot;two&quot;]</span>
</pre></div>
</div>
</dd>
<dt><strong>regexprfindall function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.regexprfindall">
<code class="descname">regexprfindall</code><span class="sig-paren">(</span><em>pattern</em>, <em>text</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.text.regexprfindall" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>This function returns <em>all</em> matches of <em>pattern</em> in text.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select regexprfindall(&#39;\w+&#39;, &#39;one&#39;)&quot;</span><span class="p">)</span>
<span class="go">regexprfindall(&#39;\w+&#39;, &#39;one&#39;)</span>
<span class="go">----------------------------</span>
<span class="go">[&quot;one&quot;]</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select regexprfindall(&#39;\w+&#39;, &#39;one two three&#39;)&quot;</span><span class="p">)</span>
<span class="go">regexprfindall(&#39;\w+&#39;, &#39;one two three&#39;)</span>
<span class="go">--------------------------------------</span>
<span class="go">[&quot;one&quot;,&quot;two&quot;,&quot;three&quot;]</span>
</pre></div>
</div>
</dd>
<dt><strong>regexprmatches function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.regexprmatches">
<code class="descname">regexprmatches</code><span class="sig-paren">(</span><em>pattern</em>, <em>arg</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.text.regexprmatches" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>This function returns true if the pattern matches arg or false otherwise.</p>
<p>Examples use <cite>inversion</cite>.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;regexprmatches &#39;(a)&#39; &#39;qwer a qwer&#39;  &quot;</span><span class="p">)</span>
<span class="go">regexprmatches(&#39;(a)&#39;,&#39;qwer a qwer&#39;)</span>
<span class="go">-----------------------------------</span>
<span class="go">1</span>
</pre></div>
</div>
</dd>
<dt><strong>stripchars function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.stripchars">
<code class="descname">stripchars</code><span class="sig-paren">(</span><em>str</em><span class="optional">[</span>, <em>stripchars</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.text.stripchars" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns <em>str</em> removing leading and trailing whitespace characters
or <em>stripchars</em> characters if given. Works like python’s
<a class="reference external" href="http://docs.python.org/library/stdtypes.html#str.strip">strip function</a>.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select stripchars(&#39; initial and final spaces  &#39;) as test  &quot;</span><span class="p">)</span>
<span class="go">test</span>
<span class="go">------------------------</span>
<span class="go">initial and final spaces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select stripchars(&#39; &lt;initial and final spaces&gt;  &#39;,&#39; &lt;&gt;&#39;) as test  &quot;</span><span class="p">)</span>
<span class="go">test</span>
<span class="go">------------------------</span>
<span class="go">initial and final spaces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select stripchars(null)&quot;</span><span class="p">)</span>
<span class="go">stripchars(null)</span>
<span class="go">----------------</span>
<span class="go">None</span>
</pre></div>
</div>
</dd>
<dt><strong>sunitouni function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.sunitouni">
<code class="descname">sunitouni</code><span class="sig-paren">(</span><em>str</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.text.sunitouni" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns <em>str</em> replacing literal unicode code points to their string representation.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select sunitouni(&#39;br</span><span class="se">\u00fb</span><span class="s2">l</span><span class="se">\u00e9</span><span class="s2">&#39;) as test  &quot;</span><span class="p">)</span>
<span class="go">test</span>
<span class="go">-------</span>
<span class="go">brûlé</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select sunitouni(&#39;\u that is not a unicode code point&#39;) as test  &quot;</span><span class="p">)</span>
<span class="go">test</span>
<span class="go">-----------------------------------</span>
<span class="go">\u that is not a unicode code point</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select sunitouni(null)&quot;</span><span class="p">)</span>
<span class="go">sunitouni(null)</span>
<span class="go">---------------</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select sunitouni(9)&quot;</span><span class="p">)</span>
<span class="go">sunitouni(9)</span>
<span class="go">------------</span>
<span class="go">9</span>
</pre></div>
</div>
</dd>
<dt><strong>textreferences function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.textreferences">
<code class="descname">textreferences</code><span class="sig-paren">(</span><em>text</em>, <em>maxlen = 5</em>, <em>pattern = (|_)(1|2)d{3</em>, <em>3}(|_)</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.text.textreferences" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the “Reference” section of documents. To find it, it searches for parts of the document that
have a high density of pattern matches.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">eeeeeeeeeeeeee</span>
<span class="gp">... </span><span class="s1">gggggggggggggg</span>
<span class="gp">... </span><span class="s1">aaaaaaaaaaaaaa</span>
<span class="gp">... </span><span class="s1">bbbbbbbbbbbbbb</span>
<span class="gp">... </span><span class="s1">aaa_1914_ccccc</span>
<span class="gp">... </span><span class="s1">bbb_2014_bbbbb</span>
<span class="gp">... </span><span class="s1">dddd_2008_ddddddd</span>
<span class="gp">... </span><span class="s1">cccc_2005_ccccc</span>
<span class="gp">... </span><span class="s1">ccccc_2014_ccccc</span>
<span class="gp">... </span><span class="s1">dddddd_2009_ddddd</span>
<span class="gp">... </span><span class="s1">gggggggggggggg</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select textreferences(group_concat(a,&#39;</span><span class="se">\n</span><span class="s2">&#39;),1,&#39;(|_)(1|2)\d{3,3}(|_)&#39;) as a from table1&quot;</span><span class="p">)</span>
<span class="go">a</span>
<span class="go">--------------------------------------------------------------------------------------------------</span>
<span class="go">aaa_1914_ccccc</span>
<span class="go">bbb_2014_bbbbb</span>
<span class="go">dddd_2008_ddddddd</span>
<span class="go">cccc_2005_ccccc</span>
<span class="go">ccccc_2014_ccccc</span>
<span class="go">dddddd_2009_ddddd</span>
</pre></div>
</div>
<p>If an inadequate amount of newlines is found, it returns the text as is.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select textreferences(group_concat(a,&#39;.&#39;)) from table1&quot;</span><span class="p">)</span>
<span class="go">textreferences(group_concat(a,&#39;.&#39;))</span>
<span class="go">-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">eeeeeeeeeeeeee.gggggggggggggg.aaaaaaaaaaaaaa.bbbbbbbbbbbbbb.aaa_1914_ccccc.bbb_2014_bbbbb.dddd_2008_ddddddd.cccc_2005_ccccc.ccccc_2014_ccccc.dddddd_2009_ddddd.gggggggggggggg</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select textreferences(&#39;&#39;)&quot;</span><span class="p">)</span>
<span class="go">textreferences(&#39;&#39;)</span>
<span class="go">------------------</span>
</pre></div>
</div>
</dd>
<dt><strong>textwindow function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.textwindow">
<code class="descname">textwindow</code><span class="sig-paren">(</span><em>text</em>, <em>previous_word_count = 0</em>, <em>next_word_count = 0</em>, <em>middle_word_count = 1</em>, <em>pattern = None</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.text.textwindow" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns a rolling window over the text. The window includes <em>previous_word_count</em> words before the middle word
and next_word_count words after the middleword. Optionally you may choose more than one words to be in the middle, and filter your window with a regular expression pattern</p>
<p>If the value of prev_word_count or next_word_count is negative, and a pattern exists then all matches of the pattern are
filtered out from prev and next output.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select textwindow(&#39;This is a test phrase&#39;)  &quot;</span><span class="p">)</span>
<span class="go">middle</span>
<span class="go">------</span>
<span class="go">This</span>
<span class="go">is</span>
<span class="go">a</span>
<span class="go">test</span>
<span class="go">phrase</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select textwindow(&#39;This is a test phrase&#39;,1,1)  &quot;</span><span class="p">)</span>
<span class="go">prev1 | middle | next1</span>
<span class="go">-----------------------</span>
<span class="go">      | This   | is</span>
<span class="go">This  | is     | a</span>
<span class="go">is    | a      | test</span>
<span class="go">a     | test   | phrase</span>
<span class="go">test  | phrase |</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select textwindow(&#39;This is a test phrase&#39;,1,1,2)  &quot;</span><span class="p">)</span>
<span class="go">prev1 | middle      | next1</span>
<span class="go">----------------------------</span>
<span class="go">      | This is     | a</span>
<span class="go">This  | is a        | test</span>
<span class="go">is    | a test      | phrase</span>
<span class="go">a     | test phrase |</span>
<span class="go">test  | phrase      |</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select textwindow(&#39;This is a test phrase  with pdb codes: 1abc 2bcd 3cde 4bde &#39;,-2,1,2,&#39;\d\w</span><span class="si">{3}</span><span class="s2">&#39; )  &quot;</span><span class="p">)</span>
<span class="go">prev1 | prev2  | middle    | next1</span>
<span class="go">----------------------------------</span>
<span class="go">pdb   | codes: | 1abc 2bcd | 3cde</span>
<span class="go">pdb   | codes: | 2bcd 3cde | 4bde</span>
<span class="go">pdb   | codes: | 3cde 4bde |</span>
<span class="go">pdb   | codes: | 4bde      |</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select textwindow(&#39;This is a test phrase (123) for filtering middle with a number&#39;,1,1,&#39;\d+&#39;)  &quot;</span><span class="p">)</span>
<span class="go">prev1  | middle | next1</span>
<span class="go">-----------------------</span>
<span class="go">phrase | (123)  | for</span>
</pre></div>
</div>
</dd>
<dt><strong>textwindow2s function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.textwindow2s">
<code class="descname">textwindow2s</code><span class="sig-paren">(</span><em>text</em>, <em>prev_word_count</em>, <em>middle_word_count</em>, <em>next_word_count</em>, <em>pattern</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.text.textwindow2s" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a rolling window in the text. The window includes numberofprev words before the middle word and numberofnext words after the middleword.
You may filter your window using a pattern.</p>
</dd></dl>

<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select textwindow2s(&#39;This is a test phrase&#39;,2,1,1)  &quot;</span><span class="p">)</span>
<span class="go">prev    | middle | next</span>
<span class="go">-------------------------</span>
<span class="go">        | This   | is</span>
<span class="go">This    | is     | a</span>
<span class="go">This is | a      | test</span>
<span class="go">is a    | test   | phrase</span>
<span class="go">a test  | phrase |</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select textwindow2s(&#39;This is a test phrase&#39;,2,1,1, &#39;\w</span><span class="si">{4}</span><span class="s2">&#39;)  &quot;</span><span class="p">)</span>
<span class="go">prev   | middle | next</span>
<span class="go">------------------------</span>
<span class="go">       | This   | is</span>
<span class="go">is a   | test   | phrase</span>
<span class="go">a test | phrase |</span>
</pre></div>
</div>
</dd>
<dt><strong>uniqueterms function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.uniqueterms">
<code class="descname">uniqueterms</code><span class="sig-paren">(</span><em>text1</em><span class="optional">[</span>, <em>text2</em>, <em>...</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; text<a class="headerlink" href="#functions.row.text.uniqueterms" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the unique terms of an input string.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">&#39;word1 word2 word2&#39;</span>
<span class="gp">... </span><span class="s1">&#39;word1 word2 word1&#39;</span>
<span class="gp">... </span><span class="s1">&#39;word&#39;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select uniqueterms(a) from table1&quot;</span><span class="p">)</span>
<span class="go">uniqueterms(a)</span>
<span class="go">--------------</span>
<span class="go">word1 word2</span>
<span class="go">word1 word2</span>
<span class="go">word</span>
</pre></div>
</div>
</dd>
<dt><strong>unitosuni function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.unitosuni">
<code class="descname">unitosuni</code><span class="sig-paren">(</span><em>str</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.text.unitosuni" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns <em>str</em> replacing non-ascii characters with their equivalent
unicode code point literal at the u00 format.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select unitosuni(&#39;brûlé&#39;) as test  &quot;</span><span class="p">)</span>
<span class="go">test</span>
<span class="go">---------------</span>
<span class="go">br\u00fbl\u00e9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select sunitouni(null)&quot;</span><span class="p">)</span>
<span class="go">sunitouni(null)</span>
<span class="go">---------------</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select unitosuni(9)&quot;</span><span class="p">)</span>
<span class="go">unitosuni(9)</span>
<span class="go">------------</span>
<span class="go">9</span>
</pre></div>
</div>
</dd>
<dt><strong>utf8clean function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.text.utf8clean">
<code class="descname">utf8clean</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span> &#x2192; text<a class="headerlink" href="#functions.row.text.utf8clean" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Removes control characters from input utf-8 text.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">test</span>
<span class="gp">... </span><span class="s1">δοκιμή!</span>
<span class="gp">... </span><span class="s1">sÃ©vignÃ</span>
<span class="gp">... </span><span class="s1">Ã©vezred</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select utf8clean(a) from table1&quot;</span><span class="p">)</span>
<span class="go">utf8clean(a)</span>
<span class="go">-------------</span>
<span class="go">test</span>
<span class="go">δοκιμή!</span>
<span class="go">sÃ©vignÃ</span>
<span class="go">Ã©vezred</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.tzconverter">
<span id="tzconverter-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">tzconverter</span></code> functions<a class="headerlink" href="#module-functions.row.tzconverter" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>tzconverter function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.tzconverter.tzconverter">
<code class="descname">tzconverter</code><span class="sig-paren">(</span><em>timestamp</em>, <em>offset</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.tzconverter.tzconverter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns timestamps converted from UTC to target timezone, indicated by the offset parameter.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</pre></div>
</div>
<p>… “2010-12-05T00:00:00+00:00”
… “2010-12-05T00:01:00+00:00”
… “2010-12-05T00:02:00+00:00”
… ‘’‘)</p>
<p>… ‘’‘)
&gt;&gt;&gt; sql(“select a, tzconverter(a,’-01:00’)  from table1 “)
a                         | tzconverter(a,’-01:00’)
—————————————————–
2010-12-05T00:00:00+00:00 | 2010-12-04T23:00:00-01:00
2010-12-05T00:01:00+00:00 | 2010-12-04T23:01:00-01:00
2010-12-05T00:02:00+00:00 | 2010-12-04T23:02:00-01:00</p>
<p>… ‘’‘)
&gt;&gt;&gt; sql(“select a, tzconverter(a,’-01’)  from table1 “)
a                         | tzconverter(a,’-01’)
————————————————–
2010-12-05T00:00:00+00:00 | 2010-12-04T23:00:00-01
2010-12-05T00:01:00+00:00 | 2010-12-04T23:01:00-01
2010-12-05T00:02:00+00:00 | 2010-12-04T23:02:00-01</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select a, tzconverter(a,&#39;-0100&#39;)  from table1 &quot;</span><span class="p">)</span>
<span class="go">a                         | tzconverter(a,&#39;-0100&#39;)</span>
<span class="go">----------------------------------------------------</span>
<span class="go">2010-12-05T00:00:00+00:00 | 2010-12-04T23:00:00-0100</span>
<span class="go">2010-12-05T00:01:00+00:00 | 2010-12-04T23:01:00-0100</span>
<span class="go">2010-12-05T00:02:00+00:00 | 2010-12-04T23:02:00-0100</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select a, tzconverter(a,&#39;+00:30&#39;)  from table1 &quot;</span><span class="p">)</span>
<span class="go">a                         | tzconverter(a,&#39;+00:30&#39;)</span>
<span class="go">-----------------------------------------------------</span>
<span class="go">2010-12-05T00:00:00+00:00 | 2010-12-05T00:30:00+00:30</span>
<span class="go">2010-12-05T00:01:00+00:00 | 2010-12-05T00:31:00+00:30</span>
<span class="go">2010-12-05T00:02:00+00:00 | 2010-12-05T00:32:00+00:30</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.util">
<span id="util-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">util</span></code> functions<a class="headerlink" href="#module-functions.row.util" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>execprogram function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.util.execprogram">
<code class="descname">execprogram</code><span class="sig-paren">(</span><em>stdin=null</em>, <em>program_name</em>, <em>parameters</em><span class="optional">[</span>, <em>raise_error</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; text or blob<a class="headerlink" href="#functions.row.util.execprogram" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Function <em>execprogram</em> executes a shell command and returns its output. If the
value of the first argument is not <em>null</em>, the arguments value will be pushed in program’s Standard Input.</p>
<p>If the program doesn’t return a <em>0</em> return code, then a madIS error will be raised, containing
the contents of the program’s error stream.</p>
<p>If the last argument of <em>execprogram</em> is set to <em>null</em>, then all program errors will be returned as <em>null</em>
(see “cat non_existent_file” examples below).</p>
<p>Every one of the program’s parameters must be provided as different arguments of the <em>execprogram</em> call
(see “cat -n” example below).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Function <em>execprogram</em> tries by default to convert the program’s output to UTF-8. If the conversion
isn’t succesfull, then it returns the output as a binary blob.</p>
</div>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">echo    test</span>
<span class="gp">... </span><span class="s1">echo    1</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select execprogram(null, a, b) from table1&quot;</span><span class="p">)</span>
<span class="go">execprogram(null, a, b)</span>
<span class="go">-----------------------</span>
<span class="go">test</span>
<span class="go">1</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select execprogram(null, null, &#39;-l&#39;)&quot;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">OperatorError</span>: <span class="n">Madis SQLError:</span>
<span class="go">Operator EXECPROGRAM: Second parameter should be the name of the program to run</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select execprogram(null, null, &#39;-l&#39;, null)&quot;</span><span class="p">)</span> 
<span class="go">execprogram(null, null, &#39;-l&#39;, null)</span>
<span class="go">-----------------------------------</span>
<span class="go">None</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select execprogram(&#39;test&#39;, &#39;cat&#39;)&quot;</span><span class="p">)</span>
<span class="go">execprogram(&#39;test&#39;, &#39;cat&#39;)</span>
<span class="go">--------------------------</span>
<span class="go">test</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select execprogram(&#39;test&#39;, &#39;cat&#39;, &#39;-n&#39;)&#39;&#39;&#39;</span><span class="p">)</span> 
<span class="go">execprogram(&#39;test&#39;, &#39;cat&#39;, &#39;-n&#39;)</span>
<span class="go">--------------------------------</span>
<span class="go">     1        test</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select execprogram(null, &#39;NON_EXISTENT_PROGRAM&#39;)&quot;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">OperatorError</span>: <span class="n">Madis SQLError:</span>
<span class="go">Operator EXECPROGRAM: [Errno 2] No such file or directory</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select execprogram(null, &#39;cat&#39;, &#39;non_existent_file&#39;)&quot;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">OperatorError</span>: <span class="n">Madis SQLError:</span>
<span class="go">Operator EXECPROGRAM: cat: non_existent_file: No such file or directory</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select execprogram(null, &#39;cat&#39;, &#39;non_existent_file&#39;, null)&quot;</span><span class="p">)</span> 
<span class="go">execprogram(null, &#39;cat&#39;, &#39;non_existent_file&#39;, null)</span>
<span class="go">---------------------------------------------------</span>
<span class="go">None</span>
</pre></div>
</div>
</dd>
<dt><strong>failif function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.util.failif">
<code class="descname">failif</code><span class="sig-paren">(</span><em>condition</em><span class="optional">[</span>, <em>messsage</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.util.failif" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>If condition is true, raises an error. If message is provided, the message is included in
raised error.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select failif(1=1,&#39;exception&#39;) as answer&quot;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">OperatorError</span>: <span class="n">Madis SQLError:</span>
<span class="go">Operator FAILIF: exception</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select failif(1=0,&#39;exception&#39;) as answer&quot;</span><span class="p">)</span> 
<span class="go">answer</span>
<span class="go">------</span>
<span class="go">0</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select failif(1=1) as answer&quot;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">OperatorError</span>: <span class="n">Madis SQLError:</span>
<span class="go">Operator FAILIF: an error was found</span>
</pre></div>
</div>
</dd>
<dt><strong>gz function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.util.gz">
<code class="descname">gz</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span> &#x2192; gzip compressed blob<a class="headerlink" href="#functions.row.util.gz" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Function <em>gz</em> compresses its input with gzip’s maximum compression level.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">&quot;qwerqewrqwerqwerqwerqwerqwer&quot;</span>
<span class="gp">... </span><span class="s1">&quot;asdfasdfasdfasdfasdfasdfsadf&quot;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select length(a), length(gz(a)) from table1&quot;</span><span class="p">)</span>
<span class="go">length(a) | length(gz(a))</span>
<span class="go">-------------------------</span>
<span class="go">28        | 20</span>
<span class="go">28        | 18</span>
</pre></div>
</div>
</dd>
<dt><strong>sleep function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.util.sleep">
<code class="descname">sleep</code><span class="sig-paren">(</span><em>seconds</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.util.sleep" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>This function waits for the given number of seconds before returning. The <em>seconds</em> parameters can
be fractional (e.g. <em>0.1</em> will sleep for 100 milliseconds).</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select sleep(0.1)&quot;</span><span class="p">)</span>
<span class="go">sleep(0.1)</span>
<span class="go">----------</span>
<span class="go">0.1</span>
</pre></div>
</div>
</dd>
<dt><strong>ungz function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.util.ungz">
<code class="descname">ungz</code><span class="sig-paren">(</span><em>blob</em><span class="sig-paren">)</span> &#x2192; text<a class="headerlink" href="#functions.row.util.ungz" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Function <em>ungz</em> decompresses gzip blobs. If the input blobs aren’t gzip
compressed, then it just returns them as they are.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">&quot;qwerqwerqwer&quot;</span>
<span class="gp">... </span><span class="s1">&quot;asdfasdfasdf&quot;</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select ungz(gz(a)) from table1&quot;</span><span class="p">)</span>
<span class="go">ungz(gz(a))</span>
<span class="go">------------</span>
<span class="go">qwerqwerqwer</span>
<span class="go">asdfasdfasdf</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select ungz(&#39;string&#39;), ungz(123)&quot;</span><span class="p">)</span>
<span class="go">ungz(&#39;string&#39;) | ungz(123)</span>
<span class="go">--------------------------</span>
<span class="go">string         | 123</span>
</pre></div>
</div>
</dd>
<dt><strong>urlrequest function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.util.urlrequest">
<code class="descname">urlrequest</code><span class="sig-paren">(</span><span class="optional">[</span><em>null</em>, <span class="optional">]</span><em>url</em><span class="sig-paren">)</span> &#x2192; response<a class="headerlink" href="#functions.row.util.urlrequest" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>This functions connects to the <em>url</em> (via GET HTTP method) and returns the request’s result. If first
parameter is <em>null</em>, then in case of errors <em>null</em> will be returned.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select urlrequest(&#39;http://www.google.com/not_existing&#39;)&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">HTTPError</span>: <span class="n">HTTP Error 404: Not Found</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select urlrequest(null, &#39;http://www.google.com/not_existing&#39;) as result&quot;</span><span class="p">)</span>
<span class="go">result</span>
<span class="go">------</span>
<span class="go">None</span>
</pre></div>
</div>
</dd>
<dt><strong>urlrequestpost function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.util.urlrequestpost">
<code class="descname">urlrequestpost</code><span class="sig-paren">(</span><em>data_jdict</em>, <span class="optional">[</span><em>null</em>, <span class="optional">]</span><em>url</em><span class="sig-paren">)</span> &#x2192; response<a class="headerlink" href="#functions.row.util.urlrequestpost" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>This functions connects to the <em>url</em> (via POST HTTP method), submits the <em>data_jdict</em>, and returns the request’s result. If second
parameter is <em>null</em>, then in case of errors <em>null</em> will be returned.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select urlrequestpost(&#39;{&quot;POST_param_name&quot;:&quot;data&quot;}&#39;, &#39;http://www.google.com/not_existing&#39;)&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">HTTPError</span>: <span class="n">HTTP Error 404: Not Found</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;select urlrequestpost(&#39;[&quot;POST_param_name&quot;,&quot;data&quot;]&#39;, null, &#39;http://www.google.com/not_existing&#39;) as result&#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">result</span>
<span class="go">------</span>
<span class="go">None</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select urlrequestpost(jdict(&#39;param1&#39;,&#39;value1&#39;), null, &#39;http://www.google.com/not_existing&#39;) as result&quot;</span><span class="p">)</span>
<span class="go">result</span>
<span class="go">------</span>
<span class="go">None</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select urlrequestpost(jpack(&#39;param1&#39;,&#39;value1&#39;), null, &#39;http://www.google.com/not_existing&#39;) as result&quot;</span><span class="p">)</span>
<span class="go">result</span>
<span class="go">------</span>
<span class="go">None</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="module-functions.row.variables">
<span id="variables-functions"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">variables</span></code> functions<a class="headerlink" href="#module-functions.row.variables" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>flowname function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.variables.flowname">
<code class="descname">flowname</code><span class="sig-paren">(</span><span class="optional">[</span><em>str</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.variables.flowname" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Sets and retrieves, ‘flowname’ variable</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;flowname test flow &quot;</span><span class="p">)</span>
<span class="go">flowname(&#39;test flow&#39;)</span>
<span class="go">---------------------</span>
<span class="go">test flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;flowname&quot;</span><span class="p">)</span>
<span class="go">flowname()</span>
<span class="go">----------</span>
<span class="go">test flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;flowname &#39;arg1&#39; arg2&quot;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">OperatorError</span>: <span class="n">Madis SQLError:</span>
<span class="go">Operator FLOWNAME: Flowname accepts only 1 argument</span>
</pre></div>
</div>
</dd>
<dt><strong>getvar function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.variables.getvar">
<code class="descname">getvar</code><span class="sig-paren">(</span><em>varname</em><span class="sig-paren">)</span> &#x2192; value<a class="headerlink" href="#functions.row.variables.getvar" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns the value of varname. This function exists so as to be able to force
SQLite’s engine to always evaluate the <em>getvar</em> function. This can be achieved
by givine to the function an always changing second parameter.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;var &#39;t&#39; 5&quot;</span><span class="p">)</span>
<span class="go">var(&#39;t&#39;,&#39;5&#39;)</span>
<span class="go">------------</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;getvar &#39;t&#39;&quot;</span><span class="p">)</span>
<span class="go">getvar(&#39;t&#39;)</span>
<span class="go">-----------</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select getvar(&#39;t&#39;, random())&quot;</span><span class="p">)</span>
<span class="go">getvar(&#39;t&#39;, random())</span>
<span class="go">---------------------</span>
<span class="go">5</span>
</pre></div>
</div>
</dd>
<dt><strong>requirevars function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.variables.requirevars">
<code class="descname">requirevars</code><span class="sig-paren">(</span><em>varname1</em><span class="optional">[</span>, <em>varname2</em>, <em>...</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.variables.requirevars" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Checks if all variables (varname1,…) exist. If not it throws an exception.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;var &#39;cv1&#39; 5&quot;</span><span class="p">)</span>
<span class="go">var(&#39;cv1&#39;,&#39;5&#39;)</span>
<span class="go">--------------</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;var &#39;cv2&#39; 10&quot;</span><span class="p">)</span>
<span class="go">var(&#39;cv2&#39;,&#39;10&#39;)</span>
<span class="go">---------------</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;requirevars &#39;cv1&#39; &#39;cv2&#39;&quot;</span><span class="p">)</span>
<span class="go">requirevars(&#39;cv1&#39;,&#39;cv2&#39;)</span>
<span class="go">------------------------</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;requirevars cv1 cv2&quot;</span><span class="p">)</span>
<span class="go">requirevars(&#39;cv1 cv2&#39;)</span>
<span class="go">----------------------</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;requirevars &#39;cv1&#39; &#39;testvar&#39;&quot;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">OperatorError</span>: <span class="n">Madis SQLError:</span>
<span class="go">Operator REQUIREVARS: Variable testvar isn&#39;t initialized</span>
</pre></div>
</div>
</dd>
<dt><strong>setexecdb function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.variables.setexecdb">
<code class="descname">setexecdb</code><span class="sig-paren">(</span><em>str</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.row.variables.setexecdb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p class="last">Sets the database path/filename for exec operator.</p>
</dd>
<dt><strong>var function</strong></dt>
<dd><dl class="first function">
<dt id="functions.row.variables.var">
<code class="descname">var</code><span class="sig-paren">(</span><em>varname</em><span class="optional">[</span>, <em>value</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; value<a class="headerlink" href="#functions.row.variables.var" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Sets (if both varname and value are given) or returns (if only varname is given) the contents of a variable.</p>
<p>Examples:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;var &#39;v&#39;&quot;</span><span class="p">)</span>  
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">OperatorError</span>: <span class="n">Madis SQLError:</span>
<span class="go">Operator VAR: Variable &#39;v&#39; does not exist</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;var &#39;v&#39; 5&quot;</span><span class="p">)</span>
<span class="go">var(&#39;v&#39;,&#39;5&#39;)</span>
<span class="go">------------</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;var &#39;v&#39;&quot;</span><span class="p">)</span>
<span class="go">var(&#39;v&#39;)</span>
<span class="go">--------</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;select var(&#39;v&#39;)&quot;</span><span class="p">)</span>
<span class="go">var(&#39;v&#39;)</span>
<span class="go">--------</span>
<span class="go">5</span>
</pre></div>
</div>
</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/madislog.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Row functions list</a><ul>
<li><a class="reference internal" href="#module-functions.row.boolean"><code class="docutils literal"><span class="pre">boolean</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.date"><code class="docutils literal"><span class="pre">date</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.evals"><code class="docutils literal"><span class="pre">evals</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.fileops"><code class="docutils literal"><span class="pre">fileops</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.formating"><code class="docutils literal"><span class="pre">formating</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.htmlops"><code class="docutils literal"><span class="pre">htmlops</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.iptools"><code class="docutils literal"><span class="pre">iptools</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.jpacks"><code class="docutils literal"><span class="pre">jpacks</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.langtools"><code class="docutils literal"><span class="pre">langtools</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.logparse"><code class="docutils literal"><span class="pre">logparse</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.mathops"><code class="docutils literal"><span class="pre">mathops</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.settings"><code class="docutils literal"><span class="pre">settings</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.similarity"><code class="docutils literal"><span class="pre">similarity</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.stopwords"><code class="docutils literal"><span class="pre">stopwords</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.stringdist"><code class="docutils literal"><span class="pre">stringdist</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.termsetops"><code class="docutils literal"><span class="pre">termsetops</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.text"><code class="docutils literal"><span class="pre">text</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.tzconverter"><code class="docutils literal"><span class="pre">tzconverter</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.util"><code class="docutils literal"><span class="pre">util</span></code> functions</a></li>
<li><a class="reference internal" href="#module-functions.row.variables"><code class="docutils literal"><span class="pre">variables</span></code> functions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="examples.html"
                        title="previous chapter">Examples</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="aggregate.html"
                        title="next chapter">Aggregate functions list</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/row.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="aggregate.html" title="Aggregate functions list"
             >next</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Examples"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">madIS 1.9 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-2010, L. Stamatogiannakis, M. Triantafyllidi, M. Vayanou, M. Kyriakidi.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.6.
    </div>
  </body>
</html>